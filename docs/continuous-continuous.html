<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Continuous-continuous relationships | Data Visualization</title>
  <meta name="description" content="This book is a practical introduction to creating effective visualizations using ggplot2." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Continuous-continuous relationships | Data Visualization" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://dcl-data-vis.stanford.edu" />
  
  <meta property="og:description" content="This book is a practical introduction to creating effective visualizations using ggplot2." />
  <meta name="github-repo" content="dcl-docs/data-vis" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Continuous-continuous relationships | Data Visualization" />
  
  <meta name="twitter:description" content="This book is a practical introduction to creating effective visualizations using ggplot2." />
  

<meta name="author" content="Sara Altman, Bill Behrman" />


<meta name="date" content="2021-07-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="distributions.html"/>
<link rel="next" href="time-series.html"/>
<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Data Visualization</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-read-this-book"><i class="fa fa-check"></i>How to read this book</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#code-and-data"><i class="fa fa-check"></i>Code and data</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#organization"><i class="fa fa-check"></i>Organization</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#an-evolving-book"><i class="fa fa-check"></i>An evolving book</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="ggplot2-basics.html"><a href="ggplot2-basics.html"><i class="fa fa-check"></i><b>1</b> ggplot2 basics</a>
<ul>
<li class="chapter" data-level="1.1" data-path="ggplot2-basics.html"><a href="ggplot2-basics.html#additional-information"><i class="fa fa-check"></i><b>1.1</b> Additional information</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="ggplot2-basics.html"><a href="ggplot2-basics.html#pipes-and-aesthetics"><i class="fa fa-check"></i><b>1.1.1</b> Pipes and aesthetics</a></li>
<li class="chapter" data-level="1.1.2" data-path="ggplot2-basics.html"><a href="ggplot2-basics.html#facet-syntax"><i class="fa fa-check"></i><b>1.1.2</b> Facet syntax</a></li>
<li class="chapter" data-level="1.1.3" data-path="ggplot2-basics.html"><a href="ggplot2-basics.html#the-grammar-of-graphics"><i class="fa fa-check"></i><b>1.1.3</b> The grammar of graphics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="discrete-continuous.html"><a href="discrete-continuous.html"><i class="fa fa-check"></i><b>2</b> Discrete-continuous relationships</a>
<ul>
<li class="chapter" data-level="2.1" data-path="discrete-continuous.html"><a href="discrete-continuous.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="discrete-continuous.html"><a href="discrete-continuous.html#coordinate-systems"><i class="fa fa-check"></i><b>2.2</b> Coordinate systems</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="discrete-continuous.html"><a href="discrete-continuous.html#coord_fixed"><i class="fa fa-check"></i><b>2.2.1</b> <code>coord_fixed()</code></a></li>
<li class="chapter" data-level="2.2.2" data-path="discrete-continuous.html"><a href="discrete-continuous.html#zooming"><i class="fa fa-check"></i><b>2.2.2</b> Zooming</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="discrete-continuous.html"><a href="discrete-continuous.html#one-discrete-category"><i class="fa fa-check"></i><b>2.3</b> One discrete category</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="discrete-continuous.html"><a href="discrete-continuous.html#effective-bar-plots"><i class="fa fa-check"></i><b>2.3.1</b> Effective bar plots</a></li>
<li class="chapter" data-level="2.3.2" data-path="discrete-continuous.html"><a href="discrete-continuous.html#geom_bar"><i class="fa fa-check"></i><b>2.3.2</b> <code>geom_bar()</code></a></li>
<li class="chapter" data-level="2.3.3" data-path="discrete-continuous.html"><a href="discrete-continuous.html#bars-vs.-dots"><i class="fa fa-check"></i><b>2.3.3</b> Bars vs. dots</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="discrete-continuous.html"><a href="discrete-continuous.html#two-discrete-categories"><i class="fa fa-check"></i><b>2.4</b> Two discrete categories</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="discrete-continuous.html"><a href="discrete-continuous.html#color-and-facets"><i class="fa fa-check"></i><b>2.4.1</b> Color and facets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="general-strategy.html"><a href="general-strategy.html"><i class="fa fa-check"></i><b>3</b> General strategy</a>
<ul>
<li class="chapter" data-level="3.1" data-path="general-strategy.html"><a href="general-strategy.html#the-goals-of-visualization"><i class="fa fa-check"></i><b>3.1</b> The goals of visualization</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="general-strategy.html"><a href="general-strategy.html#two-types-of-plots"><i class="fa fa-check"></i><b>3.1.1</b> Two types of plots</a></li>
<li class="chapter" data-level="3.1.2" data-path="general-strategy.html"><a href="general-strategy.html#encoding-and-decoding"><i class="fa fa-check"></i><b>3.1.2</b> Encoding and decoding</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="general-strategy.html"><a href="general-strategy.html#perception"><i class="fa fa-check"></i><b>3.2</b> Perception</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="general-strategy.html"><a href="general-strategy.html#encodings"><i class="fa fa-check"></i><b>3.2.1</b> Encodings</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="general-strategy.html"><a href="general-strategy.html#strategies"><i class="fa fa-check"></i><b>3.3</b> Strategies</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="general-strategy.html"><a href="general-strategy.html#set-goals"><i class="fa fa-check"></i><b>3.3.1</b> Set goals</a></li>
<li class="chapter" data-level="3.3.2" data-path="general-strategy.html"><a href="general-strategy.html#go-for-quantity"><i class="fa fa-check"></i><b>3.3.2</b> Go for quantity</a></li>
<li class="chapter" data-level="3.3.3" data-path="general-strategy.html"><a href="general-strategy.html#look-at-your-plots"><i class="fa fa-check"></i><b>3.3.3</b> Look at your plots</a></li>
<li class="chapter" data-level="3.3.4" data-path="general-strategy.html"><a href="general-strategy.html#iterate"><i class="fa fa-check"></i><b>3.3.4</b> Iterate</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="distributions.html"><a href="distributions.html"><i class="fa fa-check"></i><b>4</b> Distributions</a>
<ul>
<li class="chapter" data-level="4.1" data-path="distributions.html"><a href="distributions.html#introduction-1"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="distributions.html"><a href="distributions.html#mechanics"><i class="fa fa-check"></i><b>4.2</b> Mechanics</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="distributions.html"><a href="distributions.html#layering"><i class="fa fa-check"></i><b>4.2.1</b> Layering</a></li>
<li class="chapter" data-level="4.2.2" data-path="distributions.html"><a href="distributions.html#theme"><i class="fa fa-check"></i><b>4.2.2</b> <code>theme()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="distributions.html"><a href="distributions.html#one-distribution"><i class="fa fa-check"></i><b>4.3</b> One distribution</a></li>
<li class="chapter" data-level="4.4" data-path="distributions.html"><a href="distributions.html#multiple-distributions"><i class="fa fa-check"></i><b>4.4</b> Multiple distributions</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="continuous-continuous.html"><a href="continuous-continuous.html"><i class="fa fa-check"></i><b>5</b> Continuous-continuous relationships</a>
<ul>
<li class="chapter" data-level="5.1" data-path="continuous-continuous.html"><a href="continuous-continuous.html#introduction-2"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="continuous-continuous.html"><a href="continuous-continuous.html#mechanics-1"><i class="fa fa-check"></i><b>5.2</b> Mechanics</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="continuous-continuous.html"><a href="continuous-continuous.html#annotations"><i class="fa fa-check"></i><b>5.2.1</b> Annotations</a></li>
<li class="chapter" data-level="5.2.2" data-path="continuous-continuous.html"><a href="continuous-continuous.html#log-scales"><i class="fa fa-check"></i><b>5.2.2</b> Log scales</a></li>
<li class="chapter" data-level="5.2.3" data-path="continuous-continuous.html"><a href="continuous-continuous.html#continuous-color-scales"><i class="fa fa-check"></i><b>5.2.3</b> Continuous color scales</a></li>
<li class="chapter" data-level="5.2.4" data-path="continuous-continuous.html"><a href="continuous-continuous.html#size-scales"><i class="fa fa-check"></i><b>5.2.4</b> Size scales</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="continuous-continuous.html"><a href="continuous-continuous.html#two-continuous-variables"><i class="fa fa-check"></i><b>5.3</b> Two continuous variables</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="continuous-continuous.html"><a href="continuous-continuous.html#overplotting"><i class="fa fa-check"></i><b>5.3.1</b> Overplotting</a></li>
<li class="chapter" data-level="5.3.2" data-path="continuous-continuous.html"><a href="continuous-continuous.html#smoothing"><i class="fa fa-check"></i><b>5.3.2</b> Smoothing</a></li>
<li class="chapter" data-level="5.3.3" data-path="continuous-continuous.html"><a href="continuous-continuous.html#paired-data"><i class="fa fa-check"></i><b>5.3.3</b> Paired data</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="continuous-continuous.html"><a href="continuous-continuous.html#three-continuous-variables"><i class="fa fa-check"></i><b>5.4</b> Three continuous variables</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="time-series.html"><a href="time-series.html"><i class="fa fa-check"></i><b>6</b> Time series</a>
<ul>
<li class="chapter" data-level="6.1" data-path="time-series.html"><a href="time-series.html#mechanics-2"><i class="fa fa-check"></i><b>6.1</b> Mechanics</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="time-series.html"><a href="time-series.html#datetime-scales"><i class="fa fa-check"></i><b>6.1.1</b> Date/time scales</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="time-series.html"><a href="time-series.html#trends"><i class="fa fa-check"></i><b>6.2</b> Trends</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="time-series.html"><a href="time-series.html#one-response-variable"><i class="fa fa-check"></i><b>6.2.1</b> One response variable</a></li>
<li class="chapter" data-level="6.2.2" data-path="time-series.html"><a href="time-series.html#distributions-over-time"><i class="fa fa-check"></i><b>6.2.2</b> Distributions over time</a></li>
<li class="chapter" data-level="6.2.3" data-path="time-series.html"><a href="time-series.html#two-response-variables"><i class="fa fa-check"></i><b>6.2.3</b> Two response variables</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="time-series.html"><a href="time-series.html#short-term-fluctuations"><i class="fa fa-check"></i><b>6.3</b> Short-term fluctuations</a></li>
<li class="chapter" data-level="6.4" data-path="time-series.html"><a href="time-series.html#individual-values"><i class="fa fa-check"></i><b>6.4</b> Individual values</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Visualization</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="continuous-continuous-relationships" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Continuous-continuous relationships</h1>
<p>This chapter uses the following data sets.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="continuous-continuous.html#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb104-2"><a href="continuous-continuous.html#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dcldata)</span></code></pre></div>
<div id="introduction-2" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Introduction</h2>
<p>Visualizing continuous-continuous relationships allows you to see associations between variables. In this chapter, we’ll use <a href="https://www.gapminder.org/">Gapminder</a> data from the dcldata package to visualize the relationship between life expectancy and per capita GDP.</p>
<p>Here are some questions we might ask about the relationship between life expectancy and per capita GDP:</p>
<ul>
<li>Is there a relationship between these two variables?</li>
<li>How strong is this relationship?</li>
<li>What direction does the relationship go? Does life expectancy increase or decrease with per capita GDP?</li>
<li>Does life expectancy linearly increases with per capita GDP? Or does the benefit of increasing GDP slow down after a certain point?</li>
</ul>
<p>We’ll examine these questions, and others, in the course of this chapter. First, we’ll introduce some mechanics. The following <a href="https://github.com/rstudio/cheatsheets/blob/master/data-visualization-2.1.pdf">ggplot2 cheat sheet</a> sections will be relevant.</p>
<ul>
<li>Scales</li>
<li>Coordinate systems</li>
<li>Geoms:
<ul>
<li><code>geom_point()</code></li>
<li><code>geom_hex()</code></li>
<li><code>geom_bin2d()</code></li>
<li><code>geom_smooth()</code></li>
<li><code>geom_line()</code></li>
</ul></li>
</ul>
</div>
<div id="mechanics-1" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Mechanics</h2>
<p>In this mechanics section, you’ll learn about adding annotations to your plots and some more details about continuous scales.</p>
<div id="annotations" class="section level3" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Annotations</h3>
<p>Adding text to your visualizations can make them more informative. The following section from <em>R4DS</em> will introduce you the mechanics of effective annotations.</p>
<ul>
<li><a href="https://r4ds.had.co.nz/graphics-for-communication.html#annotations">Annotations</a></li>
</ul>
</div>
<div id="log-scales" class="section level3" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Log scales</h3>
<p>Transforming linear scales into log scales is a common use of the scale functions. Log scales are helpful in several different scenarios.</p>
<p>When a variable spans several orders of magnitude, a linear scale will tend to hide differences between smaller values.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="continuous-continuous.html#cb105-1" aria-hidden="true" tabindex="-1"></a>asia_2015 <span class="ot">&lt;-</span></span>
<span id="cb105-2"><a href="continuous-continuous.html#cb105-2" aria-hidden="true" tabindex="-1"></a>  gm_combined <span class="sc">%&gt;%</span> </span>
<span id="cb105-3"><a href="continuous-continuous.html#cb105-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(region <span class="sc">==</span> <span class="st">&quot;Asia&quot;</span>, year <span class="sc">==</span> <span class="dv">2015</span>)</span>
<span id="cb105-4"><a href="continuous-continuous.html#cb105-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-5"><a href="continuous-continuous.html#cb105-5" aria-hidden="true" tabindex="-1"></a>asia_2015 <span class="sc">%&gt;%</span> </span>
<span id="cb105-6"><a href="continuous-continuous.html#cb105-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">name =</span> <span class="fu">fct_reorder</span>(name, population)) <span class="sc">%&gt;%</span> </span>
<span id="cb105-7"><a href="continuous-continuous.html#cb105-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(population, name)) <span class="sc">+</span></span>
<span id="cb105-8"><a href="continuous-continuous.html#cb105-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb105-9"><a href="continuous-continuous.html#cb105-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stamp</span>(<span class="st">&quot;Bad&quot;</span>)</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-2-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Notice how countries from Jordan to Micronesia appear to have almost the same population. Many of the countries also appear to have a population of 0.</p>
<p>Using a log scale for <code>population</code> spreads out the smaller countries.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="continuous-continuous.html#cb106-1" aria-hidden="true" tabindex="-1"></a>asia_2015 <span class="sc">%&gt;%</span> </span>
<span id="cb106-2"><a href="continuous-continuous.html#cb106-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">name =</span> <span class="fu">fct_reorder</span>(name, population)) <span class="sc">%&gt;%</span> </span>
<span id="cb106-3"><a href="continuous-continuous.html#cb106-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(population, name)) <span class="sc">+</span></span>
<span id="cb106-4"><a href="continuous-continuous.html#cb106-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb106-5"><a href="continuous-continuous.html#cb106-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() </span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-3-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>It’s now possible to determine the populations of the smaller countries, as well as distinguish them from one another.</p>
<p>Log scales are also useful for data that follow a power law. You’ll find examples of power law relationships in many different domains. One common example is word frequencies. Say you count the number of times each word appears in some text, then assign each word a ranking based on this frequency. For many collections of text, the frequency of each word is inversely proportional to its rank, and this relationship follows a power law.</p>
<p>For example, <code>war_and_peace</code> contains frequencies and ranks for every word used in Leo Tolstoy’s <em>War and Peace</em>.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="continuous-continuous.html#cb107-1" aria-hidden="true" tabindex="-1"></a>war_and_peace</span>
<span id="cb107-2"><a href="continuous-continuous.html#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 18,087 x 3</span></span>
<span id="cb107-3"><a href="continuous-continuous.html#cb107-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   word   freq  rank</span></span>
<span id="cb107-4"><a href="continuous-continuous.html#cb107-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt; &lt;int&gt; &lt;int&gt;</span></span>
<span id="cb107-5"><a href="continuous-continuous.html#cb107-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 the   34549     1</span></span>
<span id="cb107-6"><a href="continuous-continuous.html#cb107-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 and   22232     2</span></span>
<span id="cb107-7"><a href="continuous-continuous.html#cb107-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 to    16675     3</span></span>
<span id="cb107-8"><a href="continuous-continuous.html#cb107-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 of    14889     4</span></span>
<span id="cb107-9"><a href="continuous-continuous.html#cb107-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 a     10522     5</span></span>
<span id="cb107-10"><a href="continuous-continuous.html#cb107-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 he     9872     6</span></span>
<span id="cb107-11"><a href="continuous-continuous.html#cb107-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 18,081 more rows</span></span></code></pre></div>
<p>In linear space, the relationship between <code>freq</code> and <code>rank</code> looks like this:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="continuous-continuous.html#cb108-1" aria-hidden="true" tabindex="-1"></a>war_and_peace <span class="sc">%&gt;%</span> </span>
<span id="cb108-2"><a href="continuous-continuous.html#cb108-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(rank, freq)) <span class="sc">+</span> </span>
<span id="cb108-3"><a href="continuous-continuous.html#cb108-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-5-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>However, if we use log scales for both axes, the relationship becomes linear.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="continuous-continuous.html#cb109-1" aria-hidden="true" tabindex="-1"></a>war_and_peace <span class="sc">%&gt;%</span> </span>
<span id="cb109-2"><a href="continuous-continuous.html#cb109-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(rank, freq)) <span class="sc">+</span> </span>
<span id="cb109-3"><a href="continuous-continuous.html#cb109-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb109-4"><a href="continuous-continuous.html#cb109-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span> </span>
<span id="cb109-5"><a href="continuous-continuous.html#cb109-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>()</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-6-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Transforming scales so that the data looks linear is useful for several reasons. First, if your data follows a power law relationship, it will often cover several orders of magnitude, and so very small or very large values will be difficult to distinguish. Using a log scale will spread out these values. Second, transforming both axes is an easy way to check if your data follows a power law relationship.</p>
</div>
<div id="continuous-color-scales" class="section level3" number="5.2.3">
<h3><span class="header-section-number">5.2.3</span> Continuous color scales</h3>
<p>There are multiple ways to map a continuous variable to a color scale. In this section, we’ll cover <em>sequential</em> and <em>diverging</em> color scales.</p>
<p>The default continuous color functions are <code>scale_color_gradient()</code> and <code>scale_fill_gradient()</code>, which create <em>sequential</em> color scales.</p>
<p>By default, <code>scale_*_gradient()</code> maps low values in the data to a dark blue and high values to a light blue.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="continuous-continuous.html#cb110-1" aria-hidden="true" tabindex="-1"></a>points <span class="ot">&lt;-</span></span>
<span id="cb110-2"><a href="continuous-continuous.html#cb110-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">1</span>))</span>
<span id="cb110-3"><a href="continuous-continuous.html#cb110-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-4"><a href="continuous-continuous.html#cb110-4" aria-hidden="true" tabindex="-1"></a>points <span class="sc">%&gt;%</span> </span>
<span id="cb110-5"><a href="continuous-continuous.html#cb110-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(x, <span class="dv">1</span>, <span class="at">fill =</span> x)) <span class="sc">+</span></span>
<span id="cb110-6"><a href="continuous-continuous.html#cb110-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">height =</span> .<span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb110-7"><a href="continuous-continuous.html#cb110-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-7-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>You can change this sequential color scale by adjusting <code>scale_*_gradient()</code>’s <code>low</code> and <code>high</code> arguments. <code>scale_*_gradient()</code> maps the minimum value in your data to the <code>low</code> color, and the maximum value in your data to the <code>high</code> color.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="continuous-continuous.html#cb111-1" aria-hidden="true" tabindex="-1"></a>points <span class="sc">%&gt;%</span> </span>
<span id="cb111-2"><a href="continuous-continuous.html#cb111-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(x, <span class="dv">1</span>, <span class="at">fill =</span> x)) <span class="sc">+</span></span>
<span id="cb111-3"><a href="continuous-continuous.html#cb111-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>() <span class="sc">+</span></span>
<span id="cb111-4"><a href="continuous-continuous.html#cb111-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">&quot;#efedf5&quot;</span>, <span class="at">high =</span> <span class="st">&quot;#756bb1&quot;</span>) <span class="sc">+</span></span>
<span id="cb111-5"><a href="continuous-continuous.html#cb111-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-8-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>The viridis color scale was designed to be colorblind-friendly. <code>scale_color_viridis_c()</code> and <code>scale_fill_viridis_c()</code> create sequential scales using the viridis colors.</p>
<p>(The <code>_c</code> stands for continuous. There is also a <code>scale_fill_viridis_d()</code> for discrete scales.)</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="continuous-continuous.html#cb112-1" aria-hidden="true" tabindex="-1"></a>points <span class="sc">%&gt;%</span> </span>
<span id="cb112-2"><a href="continuous-continuous.html#cb112-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(x, <span class="dv">1</span>, <span class="at">fill =</span> x)) <span class="sc">+</span></span>
<span id="cb112-3"><a href="continuous-continuous.html#cb112-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>() <span class="sc">+</span></span>
<span id="cb112-4"><a href="continuous-continuous.html#cb112-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>() <span class="sc">+</span></span>
<span id="cb112-5"><a href="continuous-continuous.html#cb112-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-9-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>The viridis scales are generally better than the default blue scale. A common use case for the viridis scale is with <code>geom_hex()</code>.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="continuous-continuous.html#cb113-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb113-2"><a href="continuous-continuous.html#cb113-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(carat, price)) <span class="sc">+</span></span>
<span id="cb113-3"><a href="continuous-continuous.html#cb113-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hex</span>() <span class="sc">+</span></span>
<span id="cb113-4"><a href="continuous-continuous.html#cb113-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb113-5"><a href="continuous-continuous.html#cb113-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb113-6"><a href="continuous-continuous.html#cb113-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>() </span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-10-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><code>scale_color_gradient2()</code> and <code>scale_fill_gradient2()</code> create <em>diverging</em> color scales.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="continuous-continuous.html#cb114-1" aria-hidden="true" tabindex="-1"></a>points <span class="sc">%&gt;%</span> </span>
<span id="cb114-2"><a href="continuous-continuous.html#cb114-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(x, <span class="dv">1</span>, <span class="at">fill =</span> x)) <span class="sc">+</span></span>
<span id="cb114-3"><a href="continuous-continuous.html#cb114-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>() <span class="sc">+</span></span>
<span id="cb114-4"><a href="continuous-continuous.html#cb114-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>() <span class="sc">+</span></span>
<span id="cb114-5"><a href="continuous-continuous.html#cb114-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-11-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Diverging color scales are useful if you want to encode both the sign and magnitude of each value. For example, say you have temperature data and want to encode both the temperature and whether or not that temperature is below freezing.</p>
<p><code>scale_*_gradient2()</code> has three color set points that you can adjust: <code>low</code>, <code>mid</code>, and <code>high</code>. Like <code>scale_*_gradient()</code>, <code>scale_*_gradient2()</code> maps the lowest value in your data to <code>low</code> and the highest to <code>high</code>. By default, <code>scale_*_gradient2()</code> maps 0 to <code>mid</code>. If you want to adjust which value is mapped to <code>mid</code>, you can adjust the <code>midpoint</code> argument.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="continuous-continuous.html#cb115-1" aria-hidden="true" tabindex="-1"></a>points <span class="sc">%&gt;%</span> </span>
<span id="cb115-2"><a href="continuous-continuous.html#cb115-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(x, <span class="dv">1</span>, <span class="at">fill =</span> x)) <span class="sc">+</span></span>
<span id="cb115-3"><a href="continuous-continuous.html#cb115-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>() <span class="sc">+</span></span>
<span id="cb115-4"><a href="continuous-continuous.html#cb115-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(<span class="at">midpoint =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb115-5"><a href="continuous-continuous.html#cb115-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-12-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="size-scales" class="section level3" number="5.2.4">
<h3><span class="header-section-number">5.2.4</span> Size scales</h3>
<p>As you’ll see, <code>geom_point()</code> is a common way to visualize continuous-continuous relationships. In some situations, size is a useful way to encode another continuous variable.</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="continuous-continuous.html#cb116-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb116-2"><a href="continuous-continuous.html#cb116-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(hwy, cty, <span class="at">size =</span> displ)) <span class="sc">+</span></span>
<span id="cb116-3"><a href="continuous-continuous.html#cb116-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb116-4"><a href="continuous-continuous.html#cb116-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size</span>()</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-13-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>The default size scale function is <code>scale_size().</code> Humans judge the size of circles based on area, not radii, so <code>scale_size()</code> scales the area of the circles.</p>
<p>You can change the number of circles that appear in the legend by adjusting the breaks.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="continuous-continuous.html#cb117-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb117-2"><a href="continuous-continuous.html#cb117-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(hwy, cty, <span class="at">size =</span> displ)) <span class="sc">+</span></span>
<span id="cb117-3"><a href="continuous-continuous.html#cb117-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb117-4"><a href="continuous-continuous.html#cb117-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>))</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-14-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>You can also adjust the range of possible circle areas with the <code>range</code> argument.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="continuous-continuous.html#cb118-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb118-2"><a href="continuous-continuous.html#cb118-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(hwy, cty, <span class="at">size =</span> displ)) <span class="sc">+</span></span>
<span id="cb118-3"><a href="continuous-continuous.html#cb118-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb118-4"><a href="continuous-continuous.html#cb118-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>), <span class="at">range =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="dv">4</span>))</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-15-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="two-continuous-variables" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Two continuous variables</h2>
<p><code>gm_combined</code> is a subset of the <a href="https://www.gapminder.org/data/">Gapminder data</a> and is included in the dcldata package. It includes data on population, per capita GDP, and life expectancy for 183 countries from every five years, starting in 1950 and ending in 2015.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="continuous-continuous.html#cb119-1" aria-hidden="true" tabindex="-1"></a>gm_combined </span>
<span id="cb119-2"><a href="continuous-continuous.html#cb119-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2,562 x 7</span></span>
<span id="cb119-3"><a href="continuous-continuous.html#cb119-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   iso_a3 name        region  year population gdp_per_capita life_expectancy</span></span>
<span id="cb119-4"><a href="continuous-continuous.html#cb119-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt;       &lt;chr&gt;  &lt;dbl&gt;      &lt;dbl&gt;          &lt;dbl&gt;           &lt;dbl&gt;</span></span>
<span id="cb119-5"><a href="continuous-continuous.html#cb119-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 afg    Afghanistan Asia    1950    7752118           1040            32.0</span></span>
<span id="cb119-6"><a href="continuous-continuous.html#cb119-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 afg    Afghanistan Asia    1955    8270581           1131            35.1</span></span>
<span id="cb119-7"><a href="continuous-continuous.html#cb119-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 afg    Afghanistan Asia    1960    8996351           1213            38.6</span></span>
<span id="cb119-8"><a href="continuous-continuous.html#cb119-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 afg    Afghanistan Asia    1965    9938414           1190            42.2</span></span>
<span id="cb119-9"><a href="continuous-continuous.html#cb119-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 afg    Afghanistan Asia    1970   11126123           1183            45.8</span></span>
<span id="cb119-10"><a href="continuous-continuous.html#cb119-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 afg    Afghanistan Asia    1975   12590286           1211            46.3</span></span>
<span id="cb119-11"><a href="continuous-continuous.html#cb119-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 2,556 more rows</span></span></code></pre></div>
<p>Earlier, we said we were interested in the relationship between <code>life_expectancy</code> and <code>gdp_per_capita</code>. When you have two continuous variables, a scatter plot using <code>geom_point()</code> is usually a good starting point.</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="continuous-continuous.html#cb120-1" aria-hidden="true" tabindex="-1"></a>gm_combined <span class="sc">%&gt;%</span> </span>
<span id="cb120-2"><a href="continuous-continuous.html#cb120-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(gdp_per_capita, life_expectancy)) <span class="sc">+</span></span>
<span id="cb120-3"><a href="continuous-continuous.html#cb120-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb120-4"><a href="continuous-continuous.html#cb120-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stamp</span>(<span class="st">&quot;Bad&quot;</span>)</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-17-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>However, there are several problems with this plot. First, most of the data is concentrated on the left edge of the plot because of a few large <code>gdp_per_capita</code> values. A log scale helps, but there is a lot of data and many of the points still overlap.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="continuous-continuous.html#cb121-1" aria-hidden="true" tabindex="-1"></a>gm_combined <span class="sc">%&gt;%</span> </span>
<span id="cb121-2"><a href="continuous-continuous.html#cb121-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(gdp_per_capita, life_expectancy)) <span class="sc">+</span></span>
<span id="cb121-3"><a href="continuous-continuous.html#cb121-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb121-4"><a href="continuous-continuous.html#cb121-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb121-5"><a href="continuous-continuous.html#cb121-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stamp</span>(<span class="st">&quot;Bad&quot;</span>)</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-18-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>The large amount of data makes it difficult to determine how many points there are in a given area. In the next section, we’ll talk about strategies for dealing with overplotting.</p>
<div id="overplotting" class="section level3" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Overplotting</h3>
<p>One way to address overplotting is to bin the data and then use color to encode the number of points that fall in each bin. <code>geom_bin2d()</code> and <code>geom_hex()</code> both carry out this strategy.</p>
<p><code>geom_bin2d()</code> divides up the total data space into rectangular bins. The <code>fill</code> color of the bin represents how many data points fall into the area covered by that bin.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="continuous-continuous.html#cb122-1" aria-hidden="true" tabindex="-1"></a>gm_combined <span class="sc">%&gt;%</span> </span>
<span id="cb122-2"><a href="continuous-continuous.html#cb122-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(gdp_per_capita, life_expectancy)) <span class="sc">+</span></span>
<span id="cb122-3"><a href="continuous-continuous.html#cb122-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bin2d</span>() <span class="sc">+</span></span>
<span id="cb122-4"><a href="continuous-continuous.html#cb122-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>()</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-19-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>From this plot, you can see that the highest concentration of points is around (1e4, 70).</p>
<p><code>geom_hex()</code> uses hexagons instead of rectangles.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="continuous-continuous.html#cb123-1" aria-hidden="true" tabindex="-1"></a>gm_combined <span class="sc">%&gt;%</span> </span>
<span id="cb123-2"><a href="continuous-continuous.html#cb123-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(gdp_per_capita, life_expectancy)) <span class="sc">+</span></span>
<span id="cb123-3"><a href="continuous-continuous.html#cb123-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hex</span>() <span class="sc">+</span></span>
<span id="cb123-4"><a href="continuous-continuous.html#cb123-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>()</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-20-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>We recommend using <code>geom_hex()</code> instead of <code>geom_bin2d()</code> in most situations, since it provides a finer resolution of the shape of the distribution of the underlying data.</p>
<p>The contrast between the viridis colors makes the <code>geom_hex()</code> plot even easier to decode.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="continuous-continuous.html#cb124-1" aria-hidden="true" tabindex="-1"></a>gm_combined <span class="sc">%&gt;%</span> </span>
<span id="cb124-2"><a href="continuous-continuous.html#cb124-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(gdp_per_capita, life_expectancy)) <span class="sc">+</span></span>
<span id="cb124-3"><a href="continuous-continuous.html#cb124-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hex</span>() <span class="sc">+</span></span>
<span id="cb124-4"><a href="continuous-continuous.html#cb124-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb124-5"><a href="continuous-continuous.html#cb124-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>()</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-21-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Like <code>geom_histogram()</code>, <code>geom_bin2d()</code> and <code>geom_hex()</code> both create a default number of bins, and you can adjust the binwidth with the <code>bins</code> and <code>binwidth</code> arguments. In our example, the default binwidth does a good job.</p>
<p>Now, say we want to investigate just 2010 and 2015.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="continuous-continuous.html#cb125-1" aria-hidden="true" tabindex="-1"></a>gm_combined_2010_2015 <span class="ot">&lt;-</span></span>
<span id="cb125-2"><a href="continuous-continuous.html#cb125-2" aria-hidden="true" tabindex="-1"></a>  gm_combined <span class="sc">%&gt;%</span> </span>
<span id="cb125-3"><a href="continuous-continuous.html#cb125-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2010</span>, <span class="dv">2015</span>))</span>
<span id="cb125-4"><a href="continuous-continuous.html#cb125-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-5"><a href="continuous-continuous.html#cb125-5" aria-hidden="true" tabindex="-1"></a>gm_combined_2010_2015 <span class="sc">%&gt;%</span> </span>
<span id="cb125-6"><a href="continuous-continuous.html#cb125-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(gdp_per_capita, life_expectancy)) <span class="sc">+</span></span>
<span id="cb125-7"><a href="continuous-continuous.html#cb125-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb125-8"><a href="continuous-continuous.html#cb125-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>()</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-22-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>There are fewer points, but there’s still some overplotting. We could use <code>geom_hex()</code> again.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="continuous-continuous.html#cb126-1" aria-hidden="true" tabindex="-1"></a>gm_combined_2010_2015 <span class="sc">%&gt;%</span> </span>
<span id="cb126-2"><a href="continuous-continuous.html#cb126-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(gdp_per_capita, life_expectancy)) <span class="sc">+</span></span>
<span id="cb126-3"><a href="continuous-continuous.html#cb126-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hex</span>() <span class="sc">+</span></span>
<span id="cb126-4"><a href="continuous-continuous.html#cb126-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb126-5"><a href="continuous-continuous.html#cb126-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>()</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-23-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Most of the hexagons only represent a single point, so <code>geom_hex()</code> isn’t the best option.</p>
<p>Another option is change the shape of the dots so that they have visible borders. By default, <code>geom_point()</code> points are solid-colored circles, but there are actually 25 different possible shapes. The following image from the <em>Scales</em> section of the <a href="https://github.com/rstudio/cheatsheets/blob/master/data-visualization-2.1.pdf">ggplot2 cheat sheet</a> displays these shapes along with their identifying numbers.</p>
<p><img src="images/shapes.png" width="647" style="display: block; margin: auto;" /></p>
<p><code>shape = 21</code> points have both a border and a fill. By default, the border is black and the fill is transparent.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="continuous-continuous.html#cb127-1" aria-hidden="true" tabindex="-1"></a>gm_combined_2010_2015 <span class="sc">%&gt;%</span> </span>
<span id="cb127-2"><a href="continuous-continuous.html#cb127-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(gdp_per_capita, life_expectancy)) <span class="sc">+</span></span>
<span id="cb127-3"><a href="continuous-continuous.html#cb127-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="dv">21</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb127-4"><a href="continuous-continuous.html#cb127-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>()</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-25-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>The transparent interiors and black borders make it easier to perceive individual points and spot areas of overlap. This effect is stronger if you fill the circles and add a white border.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="continuous-continuous.html#cb128-1" aria-hidden="true" tabindex="-1"></a>gm_combined_2010_2015 <span class="sc">%&gt;%</span> </span>
<span id="cb128-2"><a href="continuous-continuous.html#cb128-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(gdp_per_capita, life_expectancy)) <span class="sc">+</span></span>
<span id="cb128-3"><a href="continuous-continuous.html#cb128-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="dv">21</span>, <span class="at">fill =</span> <span class="st">&quot;black&quot;</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb128-4"><a href="continuous-continuous.html#cb128-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() </span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-26-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>A simpler strategy is to make the points more transparent. In <code>geom_point()</code>, you can adjust the transparency with the <code>alpha</code> argument.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="continuous-continuous.html#cb129-1" aria-hidden="true" tabindex="-1"></a>gm_combined_2010_2015 <span class="sc">%&gt;%</span>  </span>
<span id="cb129-2"><a href="continuous-continuous.html#cb129-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(gdp_per_capita, life_expectancy)) <span class="sc">+</span></span>
<span id="cb129-3"><a href="continuous-continuous.html#cb129-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb129-4"><a href="continuous-continuous.html#cb129-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>()</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-27-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Adjusting <code>alpha</code> makes it easier to see which areas have a high density.</p>
<p>In this situation and most others, adjusting <code>alpha</code> is better than using <code>shape = 21</code>. The <code>shape = 21</code> approach is a good solution to minor overplotting if you have a small number of points and want to emphasize the individual values. <code>alpha</code> is more general and works even if you have a large number of points with a lot of overlap.</p>
<p>Sometimes, your points will completely overlap.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="continuous-continuous.html#cb130-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb130-2"><a href="continuous-continuous.html#cb130-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(displ, hwy)) <span class="sc">+</span></span>
<span id="cb130-3"><a href="continuous-continuous.html#cb130-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-28-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>In these situations, you can use <code>geom_count()</code> to encode the number of points at a particular location with size.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="continuous-continuous.html#cb131-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb131-2"><a href="continuous-continuous.html#cb131-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(displ, hwy)) <span class="sc">+</span></span>
<span id="cb131-3"><a href="continuous-continuous.html#cb131-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_count</span>() <span class="sc">+</span></span>
<span id="cb131-4"><a href="continuous-continuous.html#cb131-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size</span>()</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-29-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="smoothing" class="section level3" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> Smoothing</h3>
<p>Here’s our earlier <code>geom_hex()</code> plot.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="continuous-continuous.html#cb132-1" aria-hidden="true" tabindex="-1"></a>gm_combined <span class="sc">%&gt;%</span> </span>
<span id="cb132-2"><a href="continuous-continuous.html#cb132-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(gdp_per_capita, life_expectancy)) <span class="sc">+</span></span>
<span id="cb132-3"><a href="continuous-continuous.html#cb132-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hex</span>() <span class="sc">+</span></span>
<span id="cb132-4"><a href="continuous-continuous.html#cb132-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb132-5"><a href="continuous-continuous.html#cb132-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>()</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-30-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><code>geom_hex()</code> does a good job of representing the data, but it can make it difficult to see the general trend. We’ll use a smooth line to get a quick sense of the trend.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="continuous-continuous.html#cb133-1" aria-hidden="true" tabindex="-1"></a>gm_combined <span class="sc">%&gt;%</span> </span>
<span id="cb133-2"><a href="continuous-continuous.html#cb133-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(gdp_per_capita, life_expectancy)) <span class="sc">+</span></span>
<span id="cb133-3"><a href="continuous-continuous.html#cb133-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hex</span>() <span class="sc">+</span></span>
<span id="cb133-4"><a href="continuous-continuous.html#cb133-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb133-5"><a href="continuous-continuous.html#cb133-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb133-6"><a href="continuous-continuous.html#cb133-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>() </span>
<span id="cb133-7"><a href="continuous-continuous.html#cb133-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; `geom_smooth()` using method = &#39;gam&#39; and formula &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</span></span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-31-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>The shaded areas around the blue line represent the confidence intervals. The larger the shaded gray area, the higher the uncertainty in that area. In this case, the confidence intervals are larger around the lowest and highest values of <code>gdp_per_capita</code>.</p>
<p>Notice that we got a message saying <code>geom_smooth()</code> is using “method = ‘gam.’” There are many different methods we could use to create a smooth line. “gam,” which is short for generalized additive model, is one. By default, <code>geom_smooth()</code> uses <code>method = "gam"</code> if your data has more than 1000 points, and <code>method = "loess"</code> if you have fewer than 1000 points because LOESS (locally estimated scatter plot smoothing) can be computationally unfeasible for larger data sets.</p>
<p>In general, we recommend using <code>method = "loess"</code> unless you have far more than 1000 points. We only have 2500 points, so we can try LOESS.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="continuous-continuous.html#cb134-1" aria-hidden="true" tabindex="-1"></a>gm_combined <span class="sc">%&gt;%</span> </span>
<span id="cb134-2"><a href="continuous-continuous.html#cb134-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(gdp_per_capita, life_expectancy)) <span class="sc">+</span></span>
<span id="cb134-3"><a href="continuous-continuous.html#cb134-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hex</span>() <span class="sc">+</span></span>
<span id="cb134-4"><a href="continuous-continuous.html#cb134-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;loess&quot;</span>) <span class="sc">+</span></span>
<span id="cb134-5"><a href="continuous-continuous.html#cb134-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb134-6"><a href="continuous-continuous.html#cb134-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>() </span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-32-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Notice that <code>method = "loess"</code> produces a smoother trend line.</p>
<p><code>geom_smooth()</code> will default to <code>method = "gam"</code> if you have too much data for LOESS, which means you will rarely need to manually specify <code>method = "gam"</code> inside <code>geom_smooth()</code>.</p>
<p>Smooth lines are a helpful tool, but they aren’t always necessary. Use smooth lines when you care about understanding or communicating a trend, but that trend is not immediately obvious without a smooth line.</p>
<p>Sometimes, you’ll want to <em>only</em> show the smooth lines. This is a good option if:</p>
<ul>
<li>You care more about trends than individual values.</li>
<li>You want to show multiple trends on the same plot.</li>
<li>You have more data than you can reasonably show on one plot.</li>
</ul>
<p>For example, here’s a plot showing the relationship between <code>gdp_per_capita</code> and <code>life_expectancy</code>. We’ve also used <code>color</code> to encode <code>region</code>.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="continuous-continuous.html#cb135-1" aria-hidden="true" tabindex="-1"></a>gm_combined <span class="sc">%&gt;%</span> </span>
<span id="cb135-2"><a href="continuous-continuous.html#cb135-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(gdp_per_capita, life_expectancy, <span class="at">color =</span> region)) <span class="sc">+</span></span>
<span id="cb135-3"><a href="continuous-continuous.html#cb135-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb135-4"><a href="continuous-continuous.html#cb135-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb135-5"><a href="continuous-continuous.html#cb135-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stamp</span>(<span class="st">&quot;Bad&quot;</span>)</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-33-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>In this plot, there are too many data points to determine the relationship between <code>life_expectancy</code> and <code>gdp_per_capita</code> for each region. We could add a smooth line on top of the points for each region.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="continuous-continuous.html#cb136-1" aria-hidden="true" tabindex="-1"></a>gm_combined <span class="sc">%&gt;%</span> </span>
<span id="cb136-2"><a href="continuous-continuous.html#cb136-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(gdp_per_capita, life_expectancy, <span class="at">color =</span> region)) <span class="sc">+</span></span>
<span id="cb136-3"><a href="continuous-continuous.html#cb136-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb136-4"><a href="continuous-continuous.html#cb136-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;loess&quot;</span>) <span class="sc">+</span></span>
<span id="cb136-5"><a href="continuous-continuous.html#cb136-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb136-6"><a href="continuous-continuous.html#cb136-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stamp</span>(<span class="st">&quot;Bad&quot;</span>)</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-34-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>However, this is even worse. There is too much going on, and you can’t distinguish the colored smooth lines on top of all the points.</p>
<p>Removing the points allows you to see that each region has a slightly different trend.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="continuous-continuous.html#cb137-1" aria-hidden="true" tabindex="-1"></a>gm_combined <span class="sc">%&gt;%</span> </span>
<span id="cb137-2"><a href="continuous-continuous.html#cb137-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(gdp_per_capita, life_expectancy, <span class="at">color =</span> region)) <span class="sc">+</span></span>
<span id="cb137-3"><a href="continuous-continuous.html#cb137-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;loess&quot;</span>) <span class="sc">+</span></span>
<span id="cb137-4"><a href="continuous-continuous.html#cb137-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>()</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-35-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>You can remove the confidence intervals by setting <code>se = FALSE</code> inside <code>geom_smooth()</code>, but you should only do so if the confidence intervals are small and constant throughout the entire smooth line.</p>
<p>When you decode this plot, you have to connect each line to its corresponding legend label. Notice that, even though there are only four regions, you still have to go back-and-forth between the legend and the plot quite a bit. This process would be easier if the order of the legend matched the order of the lines (<span class="citation"><a href="#ref-wilke-2019" role="doc-biblioref">Wilke</a> (<a href="#ref-wilke-2019" role="doc-biblioref">2019</a>)</span>). One option is to change the order of the legend by adjusting <code>breaks</code> in <code>scale_color_discrete()</code>.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="continuous-continuous.html#cb138-1" aria-hidden="true" tabindex="-1"></a>gm_combined <span class="sc">%&gt;%</span> </span>
<span id="cb138-2"><a href="continuous-continuous.html#cb138-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(gdp_per_capita, life_expectancy, <span class="at">color =</span> region)) <span class="sc">+</span></span>
<span id="cb138-3"><a href="continuous-continuous.html#cb138-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;loess&quot;</span>) <span class="sc">+</span></span>
<span id="cb138-4"><a href="continuous-continuous.html#cb138-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb138-5"><a href="continuous-continuous.html#cb138-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_discrete</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="st">&quot;Europe&quot;</span>, <span class="st">&quot;Americas&quot;</span>, <span class="st">&quot;Asia&quot;</span>, <span class="st">&quot;Africa&quot;</span>))</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-36-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>A better option is to use <code>fct_reorder2()</code> to reorder <code>region</code> by the last <code>life_expectancy</code> value.</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="continuous-continuous.html#cb139-1" aria-hidden="true" tabindex="-1"></a>gm_combined <span class="sc">%&gt;%</span> </span>
<span id="cb139-2"><a href="continuous-continuous.html#cb139-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">region =</span>  <span class="fu">fct_reorder2</span>(region, gdp_per_capita, life_expectancy)) <span class="sc">%&gt;%</span> </span>
<span id="cb139-3"><a href="continuous-continuous.html#cb139-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(gdp_per_capita, life_expectancy, <span class="at">color =</span> region)) <span class="sc">+</span></span>
<span id="cb139-4"><a href="continuous-continuous.html#cb139-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;loess&quot;</span>) <span class="sc">+</span></span>
<span id="cb139-5"><a href="continuous-continuous.html#cb139-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>()</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-37-1.png" width="672" style="display: block; margin: auto;" />
<code>fct_reorder2()</code> essentially first arranges <code>region</code> by <code>gdp_per_capita</code>, then reorders <code>region</code> by the last value in <code>life_expectancy</code>. This option is better than reordering by hand because it is simpler and will still work even if the data changes.</p>
<p>We can also adjust <code>legend.justification</code> in <code>theme()</code> so that the legend is at the top of the plot, closer to the lines.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="continuous-continuous.html#cb140-1" aria-hidden="true" tabindex="-1"></a>gm_combined <span class="sc">%&gt;%</span> </span>
<span id="cb140-2"><a href="continuous-continuous.html#cb140-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">region =</span>  <span class="fu">fct_reorder2</span>(region, gdp_per_capita, life_expectancy)) <span class="sc">%&gt;%</span> </span>
<span id="cb140-3"><a href="continuous-continuous.html#cb140-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(gdp_per_capita, life_expectancy, <span class="at">color =</span> region)) <span class="sc">+</span></span>
<span id="cb140-4"><a href="continuous-continuous.html#cb140-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;loess&quot;</span>) <span class="sc">+</span></span>
<span id="cb140-5"><a href="continuous-continuous.html#cb140-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb140-6"><a href="continuous-continuous.html#cb140-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.justification =</span> <span class="st">&quot;top&quot;</span>)</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-38-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>It’s now much easier to connect a line with a region.</p>
</div>
<div id="paired-data" class="section level3" number="5.3.3">
<h3><span class="header-section-number">5.3.3</span> Paired data</h3>
<p>Paired data occurs when you have the same measure at two separate points. For example, if you measured the heights of a group of children at age three, and then again two years later at age five, you would have paired data.</p>
<p>In the Gapminder data, we might want to understand how life expectancy changed from 2010 to 2015 for each country. This data is paired. The same metric (life expectancy) was measured twice at two different points.</p>
<p>To get the data into a form that is easy to visualize, we’ll need to use <code>pivot_wider()</code>.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="continuous-continuous.html#cb141-1" aria-hidden="true" tabindex="-1"></a>gm_combined_paired <span class="ot">&lt;-</span></span>
<span id="cb141-2"><a href="continuous-continuous.html#cb141-2" aria-hidden="true" tabindex="-1"></a>  gm_combined_2010_2015 <span class="sc">%&gt;%</span>  </span>
<span id="cb141-3"><a href="continuous-continuous.html#cb141-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(iso_a3, name, region, year, life_expectancy) <span class="sc">%&gt;%</span> </span>
<span id="cb141-4"><a href="continuous-continuous.html#cb141-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb141-5"><a href="continuous-continuous.html#cb141-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> year,</span>
<span id="cb141-6"><a href="continuous-continuous.html#cb141-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_prefix =</span> <span class="st">&quot;year_&quot;</span>,</span>
<span id="cb141-7"><a href="continuous-continuous.html#cb141-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> life_expectancy</span>
<span id="cb141-8"><a href="continuous-continuous.html#cb141-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb141-9"><a href="continuous-continuous.html#cb141-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-10"><a href="continuous-continuous.html#cb141-10" aria-hidden="true" tabindex="-1"></a>gm_combined_paired </span>
<span id="cb141-11"><a href="continuous-continuous.html#cb141-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 183 x 5</span></span>
<span id="cb141-12"><a href="continuous-continuous.html#cb141-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   iso_a3 name                region   year_2010 year_2015</span></span>
<span id="cb141-13"><a href="continuous-continuous.html#cb141-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt;               &lt;chr&gt;        &lt;dbl&gt;     &lt;dbl&gt;</span></span>
<span id="cb141-14"><a href="continuous-continuous.html#cb141-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 afg    Afghanistan         Asia          56.2      57.9</span></span>
<span id="cb141-15"><a href="continuous-continuous.html#cb141-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 alb    Albania             Europe        76.3      77.6</span></span>
<span id="cb141-16"><a href="continuous-continuous.html#cb141-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 dza    Algeria             Africa        76.6      77.3</span></span>
<span id="cb141-17"><a href="continuous-continuous.html#cb141-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 ago    Angola              Africa        60.1      64  </span></span>
<span id="cb141-18"><a href="continuous-continuous.html#cb141-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 atg    Antigua and Barbuda Americas      76.8      77.2</span></span>
<span id="cb141-19"><a href="continuous-continuous.html#cb141-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 arg    Argentina           Americas      75.8      76.5</span></span>
<span id="cb141-20"><a href="continuous-continuous.html#cb141-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 177 more rows</span></span></code></pre></div>
<p>One way to visualize paired data is to encode one of the values on x-axis and one on the y-axis.</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="continuous-continuous.html#cb142-1" aria-hidden="true" tabindex="-1"></a>gm_combined_paired <span class="sc">%&gt;%</span> </span>
<span id="cb142-2"><a href="continuous-continuous.html#cb142-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year_2010, year_2015)) <span class="sc">+</span></span>
<span id="cb142-3"><a href="continuous-continuous.html#cb142-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) </span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-40-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>There are a couple of problems with this plot. First, notice that even though the x- and y-axes are in the same units (years) and cover a similar range of values, one unit on the x-axis covers a different number of years than one unit on the y-axis. This is unnecessarily confusing. We can use <code>coord_fixed()</code> to set the aspect ratio to 1.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="continuous-continuous.html#cb143-1" aria-hidden="true" tabindex="-1"></a>gm_combined_paired <span class="sc">%&gt;%</span> </span>
<span id="cb143-2"><a href="continuous-continuous.html#cb143-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year_2010, year_2015)) <span class="sc">+</span></span>
<span id="cb143-3"><a href="continuous-continuous.html#cb143-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb143-4"><a href="continuous-continuous.html#cb143-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>()</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-41-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>It looks like, for most countries, life expectancy didn’t change much from 2010 to 2015. A reference line will make it easier to tell if they stayed exactly the same, increased, or decreased.</p>
<p>Previously, you learned about vertical and horizontal reference lines at fixed intercepts. In this case, we’ll want a reference line at <code>y = x</code>. This reference line indicates what the data would look like if life expectancy did not change from 2010 to 2015. Points above the lines represent countries in which life expectancy <em>increased</em> from 2010 to 2015. Points below the line represent countries in life expectancy <em>decreased</em> from 2010 to 2015. We’ll add annotations to make this distinction easier to decode.</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="continuous-continuous.html#cb144-1" aria-hidden="true" tabindex="-1"></a>gm_combined_paired <span class="sc">%&gt;%</span> </span>
<span id="cb144-2"><a href="continuous-continuous.html#cb144-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year_2010, year_2015)) <span class="sc">+</span></span>
<span id="cb144-3"><a href="continuous-continuous.html#cb144-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb144-4"><a href="continuous-continuous.html#cb144-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">slope =</span> <span class="dv">1</span>, <span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb144-5"><a href="continuous-continuous.html#cb144-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(</span>
<span id="cb144-6"><a href="continuous-continuous.html#cb144-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, </span>
<span id="cb144-7"><a href="continuous-continuous.html#cb144-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">65</span>), </span>
<span id="cb144-8"><a href="continuous-continuous.html#cb144-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">85</span>, <span class="dv">50</span>), </span>
<span id="cb144-9"><a href="continuous-continuous.html#cb144-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">c</span>(<span class="st">&quot;Life expectancy increased&quot;</span>, <span class="st">&quot;Life expectancy decreased&quot;</span>), </span>
<span id="cb144-10"><a href="continuous-continuous.html#cb144-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="dv">0</span></span>
<span id="cb144-11"><a href="continuous-continuous.html#cb144-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb144-12"><a href="continuous-continuous.html#cb144-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>()  </span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-42-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>It’s now easy to see that life expectancy increased for most countries between 2010 and 2015.</p>
<p>There are a couple of points far away from the red line. What countries do these points represent? Labelling these points could make our plot more interesting.</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="continuous-continuous.html#cb145-1" aria-hidden="true" tabindex="-1"></a>outliers <span class="ot">&lt;-</span></span>
<span id="cb145-2"><a href="continuous-continuous.html#cb145-2" aria-hidden="true" tabindex="-1"></a>  gm_combined_paired <span class="sc">%&gt;%</span> </span>
<span id="cb145-3"><a href="continuous-continuous.html#cb145-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">diff =</span> year_2015 <span class="sc">-</span> year_2010) <span class="sc">%&gt;%</span> </span>
<span id="cb145-4"><a href="continuous-continuous.html#cb145-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(diff <span class="sc">&lt;</span> <span class="sc">-</span><span class="fl">0.5</span> <span class="sc">|</span> diff <span class="sc">&gt;</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb145-5"><a href="continuous-continuous.html#cb145-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nudge_x =</span> <span class="fu">if_else</span>(diff <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="sc">-</span><span class="dv">5</span>, <span class="dv">2</span>))</span>
<span id="cb145-6"><a href="continuous-continuous.html#cb145-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-7"><a href="continuous-continuous.html#cb145-7" aria-hidden="true" tabindex="-1"></a>gm_combined_paired <span class="sc">%&gt;%</span> </span>
<span id="cb145-8"><a href="continuous-continuous.html#cb145-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year_2010, year_2015)) <span class="sc">+</span></span>
<span id="cb145-9"><a href="continuous-continuous.html#cb145-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb145-10"><a href="continuous-continuous.html#cb145-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">slope =</span> <span class="dv">1</span>, <span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb145-11"><a href="continuous-continuous.html#cb145-11" aria-hidden="true" tabindex="-1"></a>  ggrepel<span class="sc">::</span><span class="fu">geom_text_repel</span>(</span>
<span id="cb145-12"><a href="continuous-continuous.html#cb145-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> name), </span>
<span id="cb145-13"><a href="continuous-continuous.html#cb145-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> outliers,</span>
<span id="cb145-14"><a href="continuous-continuous.html#cb145-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_x =</span> outliers<span class="sc">$</span>nudge_x</span>
<span id="cb145-15"><a href="continuous-continuous.html#cb145-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb145-16"><a href="continuous-continuous.html#cb145-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(</span>
<span id="cb145-17"><a href="continuous-continuous.html#cb145-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, </span>
<span id="cb145-18"><a href="continuous-continuous.html#cb145-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">65</span>), </span>
<span id="cb145-19"><a href="continuous-continuous.html#cb145-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">85</span>, <span class="dv">50</span>), </span>
<span id="cb145-20"><a href="continuous-continuous.html#cb145-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">c</span>(<span class="st">&quot;Life expectancy increased&quot;</span>, <span class="st">&quot;Life expectancy decreased&quot;</span>), </span>
<span id="cb145-21"><a href="continuous-continuous.html#cb145-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="dv">0</span></span>
<span id="cb145-22"><a href="continuous-continuous.html#cb145-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb145-23"><a href="continuous-continuous.html#cb145-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>() </span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-43-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>This visualization prompts hypotheses about the effects of three world events: the 2010 earthquake in Haiti, the Syrian Civil War, which began in 2011, and Libyan Civil War, which also began in 2011.</p>
<p>Encoding <code>region</code> with <code>color</code> adds an additional variable to our plot.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="continuous-continuous.html#cb146-1" aria-hidden="true" tabindex="-1"></a>gm_combined_paired <span class="sc">%&gt;%</span> </span>
<span id="cb146-2"><a href="continuous-continuous.html#cb146-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year_2010, year_2015)) <span class="sc">+</span></span>
<span id="cb146-3"><a href="continuous-continuous.html#cb146-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> region), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb146-4"><a href="continuous-continuous.html#cb146-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">slope =</span> <span class="dv">1</span>, <span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb146-5"><a href="continuous-continuous.html#cb146-5" aria-hidden="true" tabindex="-1"></a>  ggrepel<span class="sc">::</span><span class="fu">geom_text_repel</span>(</span>
<span id="cb146-6"><a href="continuous-continuous.html#cb146-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> name), </span>
<span id="cb146-7"><a href="continuous-continuous.html#cb146-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> outliers,</span>
<span id="cb146-8"><a href="continuous-continuous.html#cb146-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_x =</span> outliers<span class="sc">$</span>nudge_x</span>
<span id="cb146-9"><a href="continuous-continuous.html#cb146-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb146-10"><a href="continuous-continuous.html#cb146-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(</span>
<span id="cb146-11"><a href="continuous-continuous.html#cb146-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, </span>
<span id="cb146-12"><a href="continuous-continuous.html#cb146-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">65</span>), </span>
<span id="cb146-13"><a href="continuous-continuous.html#cb146-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">85</span>, <span class="dv">50</span>), </span>
<span id="cb146-14"><a href="continuous-continuous.html#cb146-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">c</span>(<span class="st">&quot;Life expectancy increased&quot;</span>, <span class="st">&quot;Life expectancy decreased&quot;</span>), </span>
<span id="cb146-15"><a href="continuous-continuous.html#cb146-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="dv">0</span></span>
<span id="cb146-16"><a href="continuous-continuous.html#cb146-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb146-17"><a href="continuous-continuous.html#cb146-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>() </span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-44-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>You can now see that many countries in Africa have relatively low life expectancies, but made some of the largest absolute gains between 2010 and 2015.</p>
<p>Encoding both <code>year_2010</code> and <code>year_2015</code> with position make it difficult to estimate the exact change in life expectancy for a given country. If our goal is to communicate or understand these exact changes, we should create a new variable.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="continuous-continuous.html#cb147-1" aria-hidden="true" tabindex="-1"></a>gm_combined_paired <span class="sc">%&gt;%</span> </span>
<span id="cb147-2"><a href="continuous-continuous.html#cb147-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">diff =</span> year_2015 <span class="sc">-</span> year_2010)</span>
<span id="cb147-3"><a href="continuous-continuous.html#cb147-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 183 x 6</span></span>
<span id="cb147-4"><a href="continuous-continuous.html#cb147-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   iso_a3 name                region   year_2010 year_2015  diff</span></span>
<span id="cb147-5"><a href="continuous-continuous.html#cb147-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt;               &lt;chr&gt;        &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb147-6"><a href="continuous-continuous.html#cb147-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 afg    Afghanistan         Asia          56.2      57.9 1.70 </span></span>
<span id="cb147-7"><a href="continuous-continuous.html#cb147-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 alb    Albania             Europe        76.3      77.6 1.25 </span></span>
<span id="cb147-8"><a href="continuous-continuous.html#cb147-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 dza    Algeria             Africa        76.6      77.3 0.730</span></span>
<span id="cb147-9"><a href="continuous-continuous.html#cb147-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 ago    Angola              Africa        60.1      64   3.92 </span></span>
<span id="cb147-10"><a href="continuous-continuous.html#cb147-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 atg    Antigua and Barbuda Americas      76.8      77.2 0.370</span></span>
<span id="cb147-11"><a href="continuous-continuous.html#cb147-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 arg    Argentina           Americas      75.8      76.5 0.720</span></span>
<span id="cb147-12"><a href="continuous-continuous.html#cb147-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 177 more rows</span></span></code></pre></div>
<p>We now have a discrete-continuous problem. There are too many individual countries for us to be able to create a reasonably sized plot, so we’ll just focus on Asia for now.</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="continuous-continuous.html#cb148-1" aria-hidden="true" tabindex="-1"></a>gm_combined_paired <span class="sc">%&gt;%</span> </span>
<span id="cb148-2"><a href="continuous-continuous.html#cb148-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(region <span class="sc">==</span> <span class="st">&quot;Asia&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb148-3"><a href="continuous-continuous.html#cb148-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb148-4"><a href="continuous-continuous.html#cb148-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">diff =</span> year_2015 <span class="sc">-</span> year_2010,</span>
<span id="cb148-5"><a href="continuous-continuous.html#cb148-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="fu">fct_reorder</span>(name, diff)</span>
<span id="cb148-6"><a href="continuous-continuous.html#cb148-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb148-7"><a href="continuous-continuous.html#cb148-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(diff, name)) <span class="sc">+</span></span>
<span id="cb148-8"><a href="continuous-continuous.html#cb148-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-46-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>(We made the plot space bigger by adjusting the <code>fig.asp</code> parameter in the R Markdown chunk. This chunk was set to <code>fig.asp=1</code>.)</p>
<p>This visualization does a good job of depicting the difference in life expectancy, but it doesn’t show you the actual life expectancies of the countries.</p>
<p>We can visualize <code>year_2010</code>, <code>year_2015</code>, <em>and</em> the difference between the two by plotting both the 2010 and 2015 life expectancies on the same axis.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="continuous-continuous.html#cb149-1" aria-hidden="true" tabindex="-1"></a>gm_combined_paired <span class="sc">%&gt;%</span> </span>
<span id="cb149-2"><a href="continuous-continuous.html#cb149-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(region <span class="sc">==</span> <span class="st">&quot;Asia&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb149-3"><a href="continuous-continuous.html#cb149-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">name =</span> <span class="fu">fct_reorder</span>(name, year_2015)) <span class="sc">%&gt;%</span> </span>
<span id="cb149-4"><a href="continuous-continuous.html#cb149-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> name)) <span class="sc">+</span></span>
<span id="cb149-5"><a href="continuous-continuous.html#cb149-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> year_2010, <span class="at">color =</span> <span class="st">&quot;2010&quot;</span>)) <span class="sc">+</span></span>
<span id="cb149-6"><a href="continuous-continuous.html#cb149-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> year_2015, <span class="at">color =</span> <span class="st">&quot;2015&quot;</span>))</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-47-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Lines are helpful visual aids if the connection between points is important. We can add connecting lines with <code>geom_segment()</code>.</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="continuous-continuous.html#cb150-1" aria-hidden="true" tabindex="-1"></a>gm_combined_paired <span class="sc">%&gt;%</span> </span>
<span id="cb150-2"><a href="continuous-continuous.html#cb150-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(region <span class="sc">==</span> <span class="st">&quot;Asia&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb150-3"><a href="continuous-continuous.html#cb150-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">name =</span> <span class="fu">fct_reorder</span>(name, year_2015)) <span class="sc">%&gt;%</span> </span>
<span id="cb150-4"><a href="continuous-continuous.html#cb150-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> name)) <span class="sc">+</span></span>
<span id="cb150-5"><a href="continuous-continuous.html#cb150-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> year_2010, <span class="at">xend =</span> year_2015, <span class="at">y =</span> name, <span class="at">yend =</span> name)) <span class="sc">+</span></span>
<span id="cb150-6"><a href="continuous-continuous.html#cb150-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> year_2010, <span class="at">color =</span> <span class="st">&quot;2010&quot;</span>)) <span class="sc">+</span></span>
<span id="cb150-7"><a href="continuous-continuous.html#cb150-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> year_2015, <span class="at">color =</span> <span class="st">&quot;2015&quot;</span>))</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-48-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>The three different plots we made (the original scatterplot, the discrete-continuous one showing just <code>diff</code>, and this final one) all highlight different elements of the data. As always, the best visualization will depend on your specifics goals or questions.</p>
</div>
</div>
<div id="three-continuous-variables" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> Three continuous variables</h2>
<p>Say we want to understand the relationship between <code>life_expectancy</code>, <code>per_capita_gdp</code>, <code>population</code>, and <code>region</code> for just 2015.</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="continuous-continuous.html#cb151-1" aria-hidden="true" tabindex="-1"></a>gm_combined_2015 <span class="ot">&lt;-</span></span>
<span id="cb151-2"><a href="continuous-continuous.html#cb151-2" aria-hidden="true" tabindex="-1"></a>  gm_combined <span class="sc">%&gt;%</span> </span>
<span id="cb151-3"><a href="continuous-continuous.html#cb151-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2015</span>)</span></code></pre></div>
<p>We have three continuous variables to encode. Recall the encoding ranking for continuous variables from the <em>General Strategy</em> chapter:</p>
<ol style="list-style-type: decimal">
<li>Position along a common scale (i.e., placing elements along a common axis)</li>
<li>Position along identical but nonaligned scales (i.e., placing elements along a common axis, but on different facets)</li>
<li>Length</li>
<li>Angle</li>
<li>Slope</li>
<li>Area</li>
<li>Volume</li>
<li>Density</li>
<li>Color saturation (i.e., the intensity/purity of a color)</li>
<li>Color hue (blue, green, red, etc.) <span class="citation">(<a href="#ref-cleveland-1985" role="doc-biblioref">Cleveland and McGill 1985</a>)</span></li>
</ol>
<p>A scatterplot will use up our two “position along a common scale” options. We’ll encode the most important variables with position. Let’s say those are <code>life_expectancy</code> and <code>per_capita_gdp</code>. We’ll also encode our discrete variable, <code>region</code>, with color.</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="continuous-continuous.html#cb152-1" aria-hidden="true" tabindex="-1"></a>gm_combined_2015 <span class="sc">%&gt;%</span> </span>
<span id="cb152-2"><a href="continuous-continuous.html#cb152-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(gdp_per_capita, life_expectancy, <span class="at">color =</span> region)) <span class="sc">+</span></span>
<span id="cb152-3"><a href="continuous-continuous.html#cb152-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb152-4"><a href="continuous-continuous.html#cb152-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>()</span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-50-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>This is similar to the plots we created earlier. We then move down the ranking before arriving at <code>size</code>, the most reasonable option for encoding <code>population</code>.</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="continuous-continuous.html#cb153-1" aria-hidden="true" tabindex="-1"></a>gm_combined_2015 <span class="sc">%&gt;%</span> </span>
<span id="cb153-2"><a href="continuous-continuous.html#cb153-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb153-3"><a href="continuous-continuous.html#cb153-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(gdp_per_capita, life_expectancy, <span class="at">color =</span> region, <span class="at">size =</span> population)</span>
<span id="cb153-4"><a href="continuous-continuous.html#cb153-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb153-5"><a href="continuous-continuous.html#cb153-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb153-6"><a href="continuous-continuous.html#cb153-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() </span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-51-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>As we pointed out in the <em>General Strategy</em> chapter, the human ability to estimate differences in area is not very accurate. It is difficult to tell the difference similarly sized points. We can make this task a bit easier by increasing the range of possible areas. We’ll do this by adjusting <code>scale_size()</code>’s <code>range</code> argument.</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="continuous-continuous.html#cb154-1" aria-hidden="true" tabindex="-1"></a>gm_combined_2015 <span class="sc">%&gt;%</span> </span>
<span id="cb154-2"><a href="continuous-continuous.html#cb154-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb154-3"><a href="continuous-continuous.html#cb154-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(gdp_per_capita, life_expectancy, <span class="at">color =</span> region, <span class="at">size =</span> population)</span>
<span id="cb154-4"><a href="continuous-continuous.html#cb154-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb154-5"><a href="continuous-continuous.html#cb154-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb154-6"><a href="continuous-continuous.html#cb154-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="dv">20</span>)) <span class="sc">+</span></span>
<span id="cb154-7"><a href="continuous-continuous.html#cb154-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() </span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-52-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>However, now we can’t tell if the larger circles cover up smaller ones of the same color. <code>shape = 21</code> would help.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="continuous-continuous.html#cb155-1" aria-hidden="true" tabindex="-1"></a>gm_combined_2015 <span class="sc">%&gt;%</span> </span>
<span id="cb155-2"><a href="continuous-continuous.html#cb155-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb155-3"><a href="continuous-continuous.html#cb155-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(gdp_per_capita, life_expectancy, <span class="at">fill =</span> region, <span class="at">size =</span> population)</span>
<span id="cb155-4"><a href="continuous-continuous.html#cb155-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb155-5"><a href="continuous-continuous.html#cb155-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="dv">21</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb155-6"><a href="continuous-continuous.html#cb155-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="dv">20</span>)) <span class="sc">+</span></span>
<span id="cb155-7"><a href="continuous-continuous.html#cb155-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() </span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-53-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>There’s still the possibility that the large dots cover up smaller ones. <code>geom_point()</code> plots points in order of their appearance in the data. If you want to change the order in which the points are plotted, you can change the order of the rows in your data.</p>
<p>We’ll use <code>arrange()</code> to reorder our data so that each row contains a country smaller than the previous one.</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="continuous-continuous.html#cb156-1" aria-hidden="true" tabindex="-1"></a>gm_combined_2015 <span class="sc">%&gt;%</span> </span>
<span id="cb156-2"><a href="continuous-continuous.html#cb156-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(population)) <span class="sc">%&gt;%</span> </span>
<span id="cb156-3"><a href="continuous-continuous.html#cb156-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb156-4"><a href="continuous-continuous.html#cb156-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(gdp_per_capita, life_expectancy, <span class="at">fill =</span> region, <span class="at">size =</span> population)</span>
<span id="cb156-5"><a href="continuous-continuous.html#cb156-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb156-6"><a href="continuous-continuous.html#cb156-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="dv">21</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb156-7"><a href="continuous-continuous.html#cb156-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="dv">20</span>)) <span class="sc">+</span></span>
<span id="cb156-8"><a href="continuous-continuous.html#cb156-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() </span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-54-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>The <code>population</code> legend isn’t very informative. We can make it better by including more possible circle areas.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="continuous-continuous.html#cb157-1" aria-hidden="true" tabindex="-1"></a>gm_combined_2015 <span class="sc">%&gt;%</span> </span>
<span id="cb157-2"><a href="continuous-continuous.html#cb157-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(population)) <span class="sc">%&gt;%</span> </span>
<span id="cb157-3"><a href="continuous-continuous.html#cb157-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb157-4"><a href="continuous-continuous.html#cb157-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(gdp_per_capita, life_expectancy, <span class="at">size =</span> population, <span class="at">fill =</span> region)</span>
<span id="cb157-5"><a href="continuous-continuous.html#cb157-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb157-6"><a href="continuous-continuous.html#cb157-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="dv">21</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb157-7"><a href="continuous-continuous.html#cb157-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size</span>(<span class="at">breaks =</span> <span class="dv">10</span><span class="sc">^</span>(<span class="dv">6</span><span class="sc">:</span><span class="dv">9</span>), <span class="at">range =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="dv">20</span>)) <span class="sc">+</span></span>
<span id="cb157-8"><a href="continuous-continuous.html#cb157-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() </span></code></pre></div>
<p><img src="continuous-continuous_files/figure-html/unnamed-chunk-55-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>One disadvantage of plots like the above is that they make it difficult to accurately understand the relationship between the continuous variables encoded on the axes and the continuous variable encoded with size (<span class="citation"><a href="#ref-wilke-2019" role="doc-biblioref">Wilke</a> (<a href="#ref-wilke-2019" role="doc-biblioref">2019</a>)</span>). If we cared about understanding the details or strength of the relationship between <code>population</code> and <code>gdp_per_capita</code> or <code>life_expectancy</code>, a different visualization would be a better option. This might involve creating new variables to represent the relationships between the variables explicitly.</p>
<p>The visualizations in this section are based on the <a href="https://www.gapminder.org/tools/#$chart-type=bubbles">Gapminder visualizations</a>. You can also watch Hans Rosling’s <a href="https://www.youtube.com/watch?v=jbkSRLYSojo">famous demonstration</a> for a look at this data across time.</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-cleveland-1985" class="csl-entry">
Cleveland, William S., and Robert McGill. 1985. <span>“Graphical Perception and Graphical Methods for Analyzing Scientific Data.”</span> <em>American Association for the Advancement of Science</em> 229 (4716): 828–33.
</div>
<div id="ref-wilke-2019" class="csl-entry">
Wilke, Claus O. 2019. <em>Fundamentals of Data Visualization: A Primer on Making Informative and Compelling Figures</em>. O’Reilly Media, Incorporated.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="distributions.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="time-series.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/dcl-docs/data-vis/edit/master/continuous-continuous.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
