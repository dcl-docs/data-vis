<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Distributions | Data Visualization</title>
  <meta name="description" content="This book is a practical introduction to creating effective visualizations using ggplot2." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Distributions | Data Visualization" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://dcl-data-vis.stanford.edu" />
  
  <meta property="og:description" content="This book is a practical introduction to creating effective visualizations using ggplot2." />
  <meta name="github-repo" content="dcl-docs/data-vis" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Distributions | Data Visualization" />
  
  <meta name="twitter:description" content="This book is a practical introduction to creating effective visualizations using ggplot2." />
  

<meta name="author" content="Sara Altman, Bill Behrman" />


<meta name="date" content="2021-07-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="general-strategy.html"/>
<link rel="next" href="continuous-continuous.html"/>
<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Data Visualization</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-read-this-book"><i class="fa fa-check"></i>How to read this book</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#code-and-data"><i class="fa fa-check"></i>Code and data</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#organization"><i class="fa fa-check"></i>Organization</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#an-evolving-book"><i class="fa fa-check"></i>An evolving book</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="ggplot2-basics.html"><a href="ggplot2-basics.html"><i class="fa fa-check"></i><b>1</b> ggplot2 basics</a>
<ul>
<li class="chapter" data-level="1.1" data-path="ggplot2-basics.html"><a href="ggplot2-basics.html#additional-information"><i class="fa fa-check"></i><b>1.1</b> Additional information</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="ggplot2-basics.html"><a href="ggplot2-basics.html#pipes-and-aesthetics"><i class="fa fa-check"></i><b>1.1.1</b> Pipes and aesthetics</a></li>
<li class="chapter" data-level="1.1.2" data-path="ggplot2-basics.html"><a href="ggplot2-basics.html#facet-syntax"><i class="fa fa-check"></i><b>1.1.2</b> Facet syntax</a></li>
<li class="chapter" data-level="1.1.3" data-path="ggplot2-basics.html"><a href="ggplot2-basics.html#the-grammar-of-graphics"><i class="fa fa-check"></i><b>1.1.3</b> The grammar of graphics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="discrete-continuous.html"><a href="discrete-continuous.html"><i class="fa fa-check"></i><b>2</b> Discrete-continuous relationships</a>
<ul>
<li class="chapter" data-level="2.1" data-path="discrete-continuous.html"><a href="discrete-continuous.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="discrete-continuous.html"><a href="discrete-continuous.html#coordinate-systems"><i class="fa fa-check"></i><b>2.2</b> Coordinate systems</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="discrete-continuous.html"><a href="discrete-continuous.html#coord_fixed"><i class="fa fa-check"></i><b>2.2.1</b> <code>coord_fixed()</code></a></li>
<li class="chapter" data-level="2.2.2" data-path="discrete-continuous.html"><a href="discrete-continuous.html#zooming"><i class="fa fa-check"></i><b>2.2.2</b> Zooming</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="discrete-continuous.html"><a href="discrete-continuous.html#one-discrete-category"><i class="fa fa-check"></i><b>2.3</b> One discrete category</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="discrete-continuous.html"><a href="discrete-continuous.html#effective-bar-plots"><i class="fa fa-check"></i><b>2.3.1</b> Effective bar plots</a></li>
<li class="chapter" data-level="2.3.2" data-path="discrete-continuous.html"><a href="discrete-continuous.html#geom_bar"><i class="fa fa-check"></i><b>2.3.2</b> <code>geom_bar()</code></a></li>
<li class="chapter" data-level="2.3.3" data-path="discrete-continuous.html"><a href="discrete-continuous.html#bars-vs.-dots"><i class="fa fa-check"></i><b>2.3.3</b> Bars vs. dots</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="discrete-continuous.html"><a href="discrete-continuous.html#two-discrete-categories"><i class="fa fa-check"></i><b>2.4</b> Two discrete categories</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="discrete-continuous.html"><a href="discrete-continuous.html#color-and-facets"><i class="fa fa-check"></i><b>2.4.1</b> Color and facets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="general-strategy.html"><a href="general-strategy.html"><i class="fa fa-check"></i><b>3</b> General strategy</a>
<ul>
<li class="chapter" data-level="3.1" data-path="general-strategy.html"><a href="general-strategy.html#the-goals-of-visualization"><i class="fa fa-check"></i><b>3.1</b> The goals of visualization</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="general-strategy.html"><a href="general-strategy.html#two-types-of-plots"><i class="fa fa-check"></i><b>3.1.1</b> Two types of plots</a></li>
<li class="chapter" data-level="3.1.2" data-path="general-strategy.html"><a href="general-strategy.html#encoding-and-decoding"><i class="fa fa-check"></i><b>3.1.2</b> Encoding and decoding</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="general-strategy.html"><a href="general-strategy.html#perception"><i class="fa fa-check"></i><b>3.2</b> Perception</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="general-strategy.html"><a href="general-strategy.html#encodings"><i class="fa fa-check"></i><b>3.2.1</b> Encodings</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="general-strategy.html"><a href="general-strategy.html#strategies"><i class="fa fa-check"></i><b>3.3</b> Strategies</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="general-strategy.html"><a href="general-strategy.html#set-goals"><i class="fa fa-check"></i><b>3.3.1</b> Set goals</a></li>
<li class="chapter" data-level="3.3.2" data-path="general-strategy.html"><a href="general-strategy.html#go-for-quantity"><i class="fa fa-check"></i><b>3.3.2</b> Go for quantity</a></li>
<li class="chapter" data-level="3.3.3" data-path="general-strategy.html"><a href="general-strategy.html#look-at-your-plots"><i class="fa fa-check"></i><b>3.3.3</b> Look at your plots</a></li>
<li class="chapter" data-level="3.3.4" data-path="general-strategy.html"><a href="general-strategy.html#iterate"><i class="fa fa-check"></i><b>3.3.4</b> Iterate</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="distributions.html"><a href="distributions.html"><i class="fa fa-check"></i><b>4</b> Distributions</a>
<ul>
<li class="chapter" data-level="4.1" data-path="distributions.html"><a href="distributions.html#introduction-1"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="distributions.html"><a href="distributions.html#mechanics"><i class="fa fa-check"></i><b>4.2</b> Mechanics</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="distributions.html"><a href="distributions.html#layering"><i class="fa fa-check"></i><b>4.2.1</b> Layering</a></li>
<li class="chapter" data-level="4.2.2" data-path="distributions.html"><a href="distributions.html#theme"><i class="fa fa-check"></i><b>4.2.2</b> <code>theme()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="distributions.html"><a href="distributions.html#one-distribution"><i class="fa fa-check"></i><b>4.3</b> One distribution</a></li>
<li class="chapter" data-level="4.4" data-path="distributions.html"><a href="distributions.html#multiple-distributions"><i class="fa fa-check"></i><b>4.4</b> Multiple distributions</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="continuous-continuous.html"><a href="continuous-continuous.html"><i class="fa fa-check"></i><b>5</b> Continuous-continuous relationships</a>
<ul>
<li class="chapter" data-level="5.1" data-path="continuous-continuous.html"><a href="continuous-continuous.html#introduction-2"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="continuous-continuous.html"><a href="continuous-continuous.html#mechanics-1"><i class="fa fa-check"></i><b>5.2</b> Mechanics</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="continuous-continuous.html"><a href="continuous-continuous.html#annotations"><i class="fa fa-check"></i><b>5.2.1</b> Annotations</a></li>
<li class="chapter" data-level="5.2.2" data-path="continuous-continuous.html"><a href="continuous-continuous.html#log-scales"><i class="fa fa-check"></i><b>5.2.2</b> Log scales</a></li>
<li class="chapter" data-level="5.2.3" data-path="continuous-continuous.html"><a href="continuous-continuous.html#continuous-color-scales"><i class="fa fa-check"></i><b>5.2.3</b> Continuous color scales</a></li>
<li class="chapter" data-level="5.2.4" data-path="continuous-continuous.html"><a href="continuous-continuous.html#size-scales"><i class="fa fa-check"></i><b>5.2.4</b> Size scales</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="continuous-continuous.html"><a href="continuous-continuous.html#two-continuous-variables"><i class="fa fa-check"></i><b>5.3</b> Two continuous variables</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="continuous-continuous.html"><a href="continuous-continuous.html#overplotting"><i class="fa fa-check"></i><b>5.3.1</b> Overplotting</a></li>
<li class="chapter" data-level="5.3.2" data-path="continuous-continuous.html"><a href="continuous-continuous.html#smoothing"><i class="fa fa-check"></i><b>5.3.2</b> Smoothing</a></li>
<li class="chapter" data-level="5.3.3" data-path="continuous-continuous.html"><a href="continuous-continuous.html#paired-data"><i class="fa fa-check"></i><b>5.3.3</b> Paired data</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="continuous-continuous.html"><a href="continuous-continuous.html#three-continuous-variables"><i class="fa fa-check"></i><b>5.4</b> Three continuous variables</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="time-series.html"><a href="time-series.html"><i class="fa fa-check"></i><b>6</b> Time series</a>
<ul>
<li class="chapter" data-level="6.1" data-path="time-series.html"><a href="time-series.html#mechanics-2"><i class="fa fa-check"></i><b>6.1</b> Mechanics</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="time-series.html"><a href="time-series.html#datetime-scales"><i class="fa fa-check"></i><b>6.1.1</b> Date/time scales</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="time-series.html"><a href="time-series.html#trends"><i class="fa fa-check"></i><b>6.2</b> Trends</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="time-series.html"><a href="time-series.html#one-response-variable"><i class="fa fa-check"></i><b>6.2.1</b> One response variable</a></li>
<li class="chapter" data-level="6.2.2" data-path="time-series.html"><a href="time-series.html#distributions-over-time"><i class="fa fa-check"></i><b>6.2.2</b> Distributions over time</a></li>
<li class="chapter" data-level="6.2.3" data-path="time-series.html"><a href="time-series.html#two-response-variables"><i class="fa fa-check"></i><b>6.2.3</b> Two response variables</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="time-series.html"><a href="time-series.html#short-term-fluctuations"><i class="fa fa-check"></i><b>6.3</b> Short-term fluctuations</a></li>
<li class="chapter" data-level="6.4" data-path="time-series.html"><a href="time-series.html#individual-values"><i class="fa fa-check"></i><b>6.4</b> Individual values</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Visualization</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="distributions" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Distributions</h1>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="distributions.html#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb62-2"><a href="distributions.html#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dcldata)</span></code></pre></div>
<div id="introduction-1" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Introduction</h2>
<p>Take a look at the following <a href="https://github.com/rstudio/cheatsheets/blob/master/data-visualization-2.1.pdf">cheat sheet</a> sections before reading this chapter.</p>
<ul>
<li>Geoms:
<ul>
<li><code>geom_histogram()</code></li>
<li><code>geom_freqpoly()</code></li>
<li><code>geom_density()</code></li>
<li><code>geom_boxplot()</code></li>
<li><code>geom_violin()</code></li>
<li><code>geom_vline()</code></li>
<li><code>geom_hline()</code></li>
</ul></li>
</ul>
<p>A common first step when carrying out exploratory data analysis is examining distributions of continuous variables. For example, in this chapter, we’ll explore the ages of Congress members. To get a sense of what distributions can show, here are some possible hypotheses about the ages of Congress members (some more likely than others).</p>
<ul>
<li>There is no age bracket more populous than any another.</li>
<li>The average age is around 60.</li>
<li>There are a lot of Congress members who are around 30, and a lot who around 70.</li>
</ul>
<p>Before we dive into the Congress data, however, we’ll introduce some mechanics. In the following sections, you’ll learn about layering geoms and the basics of <code>theme()</code>.</p>
</div>
<div id="mechanics" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Mechanics</h2>
<div id="layering" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Layering</h3>
<p>The following plot shows the relationship of <code>class</code> to <code>hwy</code> using boxplots.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="distributions.html#cb63-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb63-2"><a href="distributions.html#cb63-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">class =</span> <span class="fu">fct_reorder</span>(class, hwy)) <span class="sc">%&gt;%</span> </span>
<span id="cb63-3"><a href="distributions.html#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(class, hwy)) <span class="sc">+</span></span>
<span id="cb63-4"><a href="distributions.html#cb63-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-2-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>We’ll explain the specifics of boxplots later on in this chapter.</p>
<p>The black line in the middle of each box represents the median value for that class. It would also be helpful to see the median <code>hwy</code> value for all car classes. To display this on our plot, we’ll add a <em>reference line</em> using <code>geom_hline()</code>. <code>geom_hline()</code> creates horizontal lines. <code>geom_vline()</code>, which creates vertical lines, and <code>geom_abline()</code>, which creates lines with a given slope and intercept, are also useful for creating reference lines.</p>
<p>In <code>geom_hline()</code>, the <code>yintercept</code> argument controls the position of the horizontal line. In this case, we want a horizontal line indicating the median <code>hwy</code> value, so we’ll set <code>yintercept</code> equal to <code>median(hwy, na.rm = TRUE)</code>.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="distributions.html#cb64-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb64-2"><a href="distributions.html#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">class =</span> <span class="fu">fct_reorder</span>(class, hwy)) <span class="sc">%&gt;%</span> </span>
<span id="cb64-3"><a href="distributions.html#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(class, hwy)) <span class="sc">+</span></span>
<span id="cb64-4"><a href="distributions.html#cb64-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb64-5"><a href="distributions.html#cb64-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> <span class="fu">median</span>(hwy, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-3-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Notice that the horizontal line is on top of the boxplots. We added <code>geom_hline()</code> our plot after <code>geom_boxplot()</code>, so the boxplots were drawn first, and then the line drawn on top. If we switch the order, the boxplots will lie on top of the line.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="distributions.html#cb65-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb65-2"><a href="distributions.html#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">class =</span> <span class="fu">fct_reorder</span>(class, hwy)) <span class="sc">%&gt;%</span> </span>
<span id="cb65-3"><a href="distributions.html#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(class, hwy)) <span class="sc">+</span></span>
<span id="cb65-4"><a href="distributions.html#cb65-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> <span class="fu">median</span>(hwy, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb65-5"><a href="distributions.html#cb65-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-4-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Placing the line on top of the boxplots can obscure information, so it’s generally better to place the line underneath.</p>
<p>You can add as many layers to a gpplot2 plot as you’d like. The different layers also don’t have to use the same data.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="distributions.html#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Source: https://en.wikipedia.org/wiki/Corporate_average_fuel_economy</span></span>
<span id="cb66-2"><a href="distributions.html#cb66-2" aria-hidden="true" tabindex="-1"></a>cafe_2008 <span class="ot">&lt;-</span></span>
<span id="cb66-3"><a href="distributions.html#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tribble</span>(</span>
<span id="cb66-4"><a href="distributions.html#cb66-4" aria-hidden="true" tabindex="-1"></a>    <span class="sc">~</span>class,      <span class="sc">~</span>mpg,</span>
<span id="cb66-5"><a href="distributions.html#cb66-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Passenger&quot;</span>, <span class="fl">27.5</span>,</span>
<span id="cb66-6"><a href="distributions.html#cb66-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Truck&quot;</span>,     <span class="fl">22.4</span></span>
<span id="cb66-7"><a href="distributions.html#cb66-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb66-8"><a href="distributions.html#cb66-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-9"><a href="distributions.html#cb66-9" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb66-10"><a href="distributions.html#cb66-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">class =</span> <span class="fu">fct_reorder</span>(class, hwy)) <span class="sc">%&gt;%</span> </span>
<span id="cb66-11"><a href="distributions.html#cb66-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb66-12"><a href="distributions.html#cb66-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> mpg, <span class="at">color =</span> class), <span class="at">data =</span> cafe_2008) <span class="sc">+</span></span>
<span id="cb66-13"><a href="distributions.html#cb66-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(class, hwy)) <span class="sc">+</span></span>
<span id="cb66-14"><a href="distributions.html#cb66-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">color =</span> <span class="st">&quot;2008 CAFE</span><span class="sc">\n</span><span class="st">standard&quot;</span>)</span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-5-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="theme" class="section level3" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> <code>theme()</code></h3>
<p>Just like every ggplot2 plot has a coordinate system, every ggplot2 plot also has a <em>theme</em>. The theme controls the parts of the plot unrelated to the data, like the plot background color, tick mark length, and the color, size, and angle of the labeling text.</p>
<p>You can edit your plot’s theme with the <code>theme()</code> function. Themes have many components, and so <code>theme()</code> takes many arguments. Take a look at <a href="https://ggplot2.tidyverse.org/reference/theme.html">tidyverse page on themes</a> to get a sense of what’s possible to change.</p>
<p>Two <code>theme()</code> arguments you’ll commonly use are <code>axis.text.x</code> and <code>axis.text.y</code>. These arguments control the appearance of the axis tick mark labels. Next, we’ll show you how to angle the x-axis tick mark labels to reduce overlap.</p>
<p>The x-axis labels overlap on the following visualization.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="distributions.html#cb67-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb67-2"><a href="distributions.html#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">manufacturer =</span> <span class="fu">fct_reorder</span>(manufacturer, hwy)) <span class="sc">%&gt;%</span> </span>
<span id="cb67-3"><a href="distributions.html#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(manufacturer, hwy)) <span class="sc">+</span></span>
<span id="cb67-4"><a href="distributions.html#cb67-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-6-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>In the <em>Discrete-continuous relationships</em> chapter, you saw how we can flip a plot and put the labels on the y-axis. However, for reasons you’ll learn later on in this chapter, in this case it’s better to keep the boxplots oriented vertically.</p>
<p>Instead of putting the labels on the y-axis, we’ll use <code>theme()</code>’s <code>axis.text.x</code> argument to angle the labels.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="distributions.html#cb68-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb68-2"><a href="distributions.html#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">manufacturer =</span> <span class="fu">fct_reorder</span>(manufacturer, hwy)) <span class="sc">%&gt;%</span> </span>
<span id="cb68-3"><a href="distributions.html#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(manufacturer, hwy)) <span class="sc">+</span></span>
<span id="cb68-4"><a href="distributions.html#cb68-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb68-5"><a href="distributions.html#cb68-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="sc">-</span><span class="dv">45</span>))</span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-7-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Take a look at the code. Notice that we had to use the function <code>element_text()</code>. <code>element_text()</code> is an <em>element function</em>. You’ll need element functions to change most of <code>theme()</code>’s arguments. If you look at <a href="https://ggplot2.tidyverse.org/reference/theme.html"><code>themes()</code>’s documentation</a>, you’ll see that the arguments are arranged into groups. At the beginning of each group, there’s a reference to the appropriate element function. <code>axis.text.x</code> controls text, and uses <code>element_text()</code>, but <code>axis.line</code> controls the appearance of a line, and so uses <code>element_line()</code>. Like <code>theme()</code>, <code>element_text()</code> has many arguments. To change the angle of the text, we only needed one: <code>angle</code>.</p>
<p>Angling makes the axis text easier to read, but the text is now far away from the x-axis. The plot would be better if the labels were closer to the boxplots they represent. We can adjust the text justification with <code>element_text()</code>’s <code>hjust</code> argument.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="distributions.html#cb69-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb69-2"><a href="distributions.html#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">manufacturer =</span> <span class="fu">fct_reorder</span>(manufacturer, hwy)) <span class="sc">%&gt;%</span> </span>
<span id="cb69-3"><a href="distributions.html#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(manufacturer, hwy)) <span class="sc">+</span></span>
<span id="cb69-4"><a href="distributions.html#cb69-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb69-5"><a href="distributions.html#cb69-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="sc">-</span><span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">0</span>))</span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-8-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Setting <code>hjust</code> to 0 aligns text to the left, which causes our labels to move closer to x-axis. <code>hjust = 1</code> aligns text right.</p>
<p>You’ll learn about the other element functions, and other useful <code>theme()</code> changes, later on.</p>
</div>
</div>
<div id="one-distribution" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> One distribution</h2>
<p>In this section, we’ll use data on Congress members serving in 2019.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="distributions.html#cb70-1" aria-hidden="true" tabindex="-1"></a>congress</span>
<span id="cb70-2"><a href="distributions.html#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 535 x 7</span></span>
<span id="cb70-3"><a href="distributions.html#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   name            state division           chamber party        age gender</span></span>
<span id="cb70-4"><a href="distributions.html#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;           &lt;chr&gt; &lt;chr&gt;              &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt; </span></span>
<span id="cb70-5"><a href="distributions.html#cb70-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Don Young       AK    Pacific            House   Republican  85.6 M     </span></span>
<span id="cb70-6"><a href="distributions.html#cb70-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Lisa Murkowski  AK    Pacific            Senate  Republican  61.6 F     </span></span>
<span id="cb70-7"><a href="distributions.html#cb70-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Dan Sullivan    AK    Pacific            Senate  Republican  54.2 M     </span></span>
<span id="cb70-8"><a href="distributions.html#cb70-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Terri Sewell    AL    East South Central House   Democrat    54.0 F     </span></span>
<span id="cb70-9"><a href="distributions.html#cb70-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Robert Aderholt AL    East South Central House   Republican  53.5 M     </span></span>
<span id="cb70-10"><a href="distributions.html#cb70-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Mo Brooks       AL    East South Central House   Republican  64.7 M     </span></span>
<span id="cb70-11"><a href="distributions.html#cb70-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 529 more rows</span></span></code></pre></div>
<p>One of our hypotheses from the introduction was the average Congress members is around 60. “Average” is, however, ambiguous. Do we mean the median or the mean?</p>
<p>For some data, the mean and median are close together, but that won’t always be the case. Means are sensitive to outliers, while medians are more robust. As an example, here’s a vector <code>x</code>.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="distributions.html#cb71-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">10</span>, <span class="dv">15</span>)</span></code></pre></div>
<p>The mean is the result of summing the elements of <code>x</code> and dividing by the length of <code>x</code>.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="distributions.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(x)</span>
<span id="cb72-2"><a href="distributions.html#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 7</span></span></code></pre></div>
<p>The median represents the midpoint of <code>x</code>. Half of the data is greater than 6, and half is less than 6.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="distributions.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(x)</span>
<span id="cb73-2"><a href="distributions.html#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 6</span></span></code></pre></div>
<p>Right now, the mean and median of <code>x</code> are close together, but if we add an outlier the mean explodes, but the median only increases by a small amount.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="distributions.html#cb74-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="fl">1e6</span>)</span>
<span id="cb74-2"><a href="distributions.html#cb74-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-3"><a href="distributions.html#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(x)</span>
<span id="cb74-4"><a href="distributions.html#cb74-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 2e+05</span></span>
<span id="cb74-5"><a href="distributions.html#cb74-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-6"><a href="distributions.html#cb74-6" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(x)</span>
<span id="cb74-7"><a href="distributions.html#cb74-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 10</span></span></code></pre></div>
<p>We’ll typically use medians instead of means for averages and references lines because of this behavior.</p>
<p><code>summary()</code> will tell us the mean and median age in Congress.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="distributions.html#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(congress<span class="sc">$</span>age)</span>
<span id="cb75-2"><a href="distributions.html#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span id="cb75-3"><a href="distributions.html#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    29.2    49.6    59.4    58.6    67.4    85.6</span></span></code></pre></div>
<p>The mean and median are close together, both between 58 and 60. Our hypothesis that the average age is 60 was pretty close.</p>
<p>Another interesting finding is that the House is slightly younger than the Senate.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="distributions.html#cb76-1" aria-hidden="true" tabindex="-1"></a>congress <span class="sc">%&gt;%</span> </span>
<span id="cb76-2"><a href="distributions.html#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(chamber) <span class="sc">%&gt;%</span> </span>
<span id="cb76-3"><a href="distributions.html#cb76-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">median_age =</span> <span class="fu">median</span>(age))</span>
<span id="cb76-4"><a href="distributions.html#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 x 2</span></span>
<span id="cb76-5"><a href="distributions.html#cb76-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   chamber median_age</span></span>
<span id="cb76-6"><a href="distributions.html#cb76-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;        &lt;dbl&gt;</span></span>
<span id="cb76-7"><a href="distributions.html#cb76-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 House         58.0</span></span>
<span id="cb76-8"><a href="distributions.html#cb76-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Senate        63.6</span></span></code></pre></div>
<p>There are also some very young Congress members,</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="distributions.html#cb77-1" aria-hidden="true" tabindex="-1"></a>congress <span class="sc">%&gt;%</span> </span>
<span id="cb77-2"><a href="distributions.html#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age <span class="sc">&lt;</span> <span class="dv">32</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb77-3"><a href="distributions.html#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(age)</span>
<span id="cb77-4"><a href="distributions.html#cb77-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 x 7</span></span>
<span id="cb77-5"><a href="distributions.html#cb77-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   name                     state division           chamber party     age gender</span></span>
<span id="cb77-6"><a href="distributions.html#cb77-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;                    &lt;chr&gt; &lt;chr&gt;              &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt; </span></span>
<span id="cb77-7"><a href="distributions.html#cb77-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Alexandria Ocasio-Cortez NY    Middle Atlantic    House   Democr…  29.2 F     </span></span>
<span id="cb77-8"><a href="distributions.html#cb77-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Abby Finkenauer          IA    West North Central House   Democr…  30.0 F     </span></span>
<span id="cb77-9"><a href="distributions.html#cb77-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Katie Hill               CA    Pacific            House   Democr…  31.4 F</span></span></code></pre></div>
<p>and the oldest member is 85.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="distributions.html#cb78-1" aria-hidden="true" tabindex="-1"></a>congress <span class="sc">%&gt;%</span> </span>
<span id="cb78-2"><a href="distributions.html#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(age) </span>
<span id="cb78-3"><a href="distributions.html#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 x 7</span></span>
<span id="cb78-4"><a href="distributions.html#cb78-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   name      state division chamber party        age gender</span></span>
<span id="cb78-5"><a href="distributions.html#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt; </span></span>
<span id="cb78-6"><a href="distributions.html#cb78-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Don Young AK    Pacific  House   Republican  85.6 M</span></span></code></pre></div>
<p>These summary calculations can only tell us so much about the data. We can get a richer understanding of the data by visualizing the age distribution, both for Congress as a whole and for the different chambers, states, parties, etc.</p>
<p>In this section, we’ll focus just on visualizing the distribution of ages for all of Congress. First, let’s try a histogram.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="distributions.html#cb79-1" aria-hidden="true" tabindex="-1"></a>congress <span class="sc">%&gt;%</span> </span>
<span id="cb79-2"><a href="distributions.html#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(age)) <span class="sc">+</span></span>
<span id="cb79-3"><a href="distributions.html#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>() </span>
<span id="cb79-4"><a href="distributions.html#cb79-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</span></span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-18-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>There’s a message above our plot telling us that <code>geom_histogram()</code> is using <code>bins = 30</code>, but we should choose a better value of <code>binwidth</code>. Both the <code>bins</code> and <code>binwidth</code> arguments of <code>geom_histogram()</code> control the width of the bars you see on the plot. <code>bins</code> controls the number of bars. By default, <code>geom_histogram()</code> creates 30 bins/bars, and then divides up the data so that each bar spans the same number of whatever units are plotted along the x-axis. Here, those units are years, and each bar represents around 2 years. The <code>binwidth</code> argument of <code>geom_histogram()</code> allows you to set the width of the bars directly.</p>
<p>If you don’t specify either <code>bins</code> or <code>binwidth</code> when you use <code>geom_histogram()</code>, you will always get the message you see above. This message reminds you that it is <em>always</em> a good idea to think about your binwidth, and you will rarely want the default.</p>
<p>Let’s try some different binwidths.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="distributions.html#cb80-1" aria-hidden="true" tabindex="-1"></a>congress <span class="sc">%&gt;%</span> </span>
<span id="cb80-2"><a href="distributions.html#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(age)) <span class="sc">+</span></span>
<span id="cb80-3"><a href="distributions.html#cb80-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> .<span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb80-4"><a href="distributions.html#cb80-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stamp</span>(<span class="st">&quot;Bad&quot;</span>)</span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-19-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>A binwidth of 0.1 years is too small. Notice how it’s difficult to see the overall shape of the distribution and the plot appears very “peaky.” Also, many of the bars only represent a single person.</p>
<p>If we swing too far in the opposite direction, however, we’ll lose information.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="distributions.html#cb81-1" aria-hidden="true" tabindex="-1"></a>congress <span class="sc">%&gt;%</span> </span>
<span id="cb81-2"><a href="distributions.html#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span></span>
<span id="cb81-3"><a href="distributions.html#cb81-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">20</span>) <span class="sc">+</span></span>
<span id="cb81-4"><a href="distributions.html#cb81-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stamp</span>(<span class="st">&quot;Bad&quot;</span>)</span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-20-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>20 years is too large of a chunk to be meaningful in this context.</p>
<p>In this case, the original 30 bins wasn’t too far off from ideal. We’ll make a minor adjustment so that each bin represents 5 years.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="distributions.html#cb82-1" aria-hidden="true" tabindex="-1"></a>congress <span class="sc">%&gt;%</span> </span>
<span id="cb82-2"><a href="distributions.html#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span></span>
<span id="cb82-3"><a href="distributions.html#cb82-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>, <span class="at">boundary =</span> <span class="dv">0</span>)</span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-21-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>The argument <code>boundary = 0</code> directs the bin boundaries to be at 0 plus multiples of the <code>binwidth</code>; in this case, the bin boundaries are at 25, 30, 35, …, 90.</p>
<p>We can improve this histogram by adding a reference line at the median.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="distributions.html#cb83-1" aria-hidden="true" tabindex="-1"></a>congress <span class="sc">%&gt;%</span> </span>
<span id="cb83-2"><a href="distributions.html#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(age)) <span class="sc">+</span></span>
<span id="cb83-3"><a href="distributions.html#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>, <span class="at">boundary =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb83-4"><a href="distributions.html#cb83-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept =</span> <span class="fu">median</span>(age)), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-22-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>For simple, one-dimensional distributions, histograms are generally a good bet. They are simple to interpret and can quickly give you a sense of the data.</p>
<p>However, there are other ways to visualize a single distribution. <code>geom_freqpoly()</code>, for example, is similar to <code>geom_histogram()</code>, but instead of encoding the number of people in each age bin with a bar, it uses points along a line.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="distributions.html#cb84-1" aria-hidden="true" tabindex="-1"></a>congress <span class="sc">%&gt;%</span> </span>
<span id="cb84-2"><a href="distributions.html#cb84-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(age)) <span class="sc">+</span></span>
<span id="cb84-3"><a href="distributions.html#cb84-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_freqpoly</span>(<span class="at">binwidth =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb84-4"><a href="distributions.html#cb84-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept =</span> <span class="fu">median</span>(age)), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-23-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>You can think of frequency polygons as “histograms with lines.” Just as you have to pick a binwidth for histograms, you also have to pick one for frequency polygons.</p>
<p>If you’re just visualizing a single distribution, a histogram is probably better. The bars make it easier to connect counts with ages, as well as see the overall shape of the distribution. However, as you’ll see later, frequency polygons can be useful for visualizing multiple distributions at once.</p>
<p><code>geom_density()</code> creates a density plot and is another option for visualizing a single distribution. Density plots are essentially smoothed histograms.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="distributions.html#cb85-1" aria-hidden="true" tabindex="-1"></a>congress <span class="sc">%&gt;%</span> </span>
<span id="cb85-2"><a href="distributions.html#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(age)) <span class="sc">+</span></span>
<span id="cb85-3"><a href="distributions.html#cb85-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>()</span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-24-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Density plots lack the fine-grained detail of frequency polygons. Sometimes, you’ll want to lose detail and focus on the overall trend, but, in other situations, density plots will hide important information. You should also avoid using density plots if you don’t have very much data. We therefore recommend using density plots only in specific scenarios.</p>
<p>One such scenario is visualizing simulated data.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="distributions.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">916</span>)</span>
<span id="cb86-2"><a href="distributions.html#cb86-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-3"><a href="distributions.html#cb86-3" aria-hidden="true" tabindex="-1"></a>sim_1 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="fl">1e4</span>))</span>
<span id="cb86-4"><a href="distributions.html#cb86-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb86-5"><a href="distributions.html#cb86-5" aria-hidden="true" tabindex="-1"></a>sim_1 <span class="sc">%&gt;%</span> </span>
<span id="cb86-6"><a href="distributions.html#cb86-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(x)) <span class="sc">+</span></span>
<span id="cb86-7"><a href="distributions.html#cb86-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>() </span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-25-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>We’ll introduce a second scenario in the next section.</p>
</div>
<div id="multiple-distributions" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Multiple distributions</h2>
<p>You’ll often want to visualize more than one distribution. For example, we might want to compare the age distributions for the different political parties in <code>congress</code>.</p>
<p>A first pass at a plot might involve using a histogram with <code>fill</code> to represent the different parties.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="distributions.html#cb87-1" aria-hidden="true" tabindex="-1"></a>congress <span class="sc">%&gt;%</span> </span>
<span id="cb87-2"><a href="distributions.html#cb87-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(age, <span class="at">fill =</span> party)) <span class="sc">+</span></span>
<span id="cb87-3"><a href="distributions.html#cb87-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb87-4"><a href="distributions.html#cb87-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_discrete</span>(<span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb87-5"><a href="distributions.html#cb87-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stamp</span>(<span class="st">&quot;Bad&quot;</span>)</span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-26-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Like stacked bar plots, stacked histograms aren’t a very good idea. Stacking makes it difficult to figure out how many Democrats are in each bin. The line</p>
<p><code>scale_fill_discrete(direction = -1)</code></p>
<p>changes the direction of the fill colors, making the Democrats blue and the Republicans red.</p>
<p>One option is to facet.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="distributions.html#cb88-1" aria-hidden="true" tabindex="-1"></a>congress <span class="sc">%&gt;%</span> </span>
<span id="cb88-2"><a href="distributions.html#cb88-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(age)) <span class="sc">+</span></span>
<span id="cb88-3"><a href="distributions.html#cb88-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb88-4"><a href="distributions.html#cb88-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(party)) <span class="sc">+</span></span>
<span id="cb88-5"><a href="distributions.html#cb88-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stamp</span>(<span class="st">&quot;Bad&quot;</span>)</span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-27-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>The side-by-side histograms are difficult to compare. Vertical facets are much better.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="distributions.html#cb89-1" aria-hidden="true" tabindex="-1"></a>congress <span class="sc">%&gt;%</span> </span>
<span id="cb89-2"><a href="distributions.html#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(age)) <span class="sc">+</span></span>
<span id="cb89-3"><a href="distributions.html#cb89-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb89-4"><a href="distributions.html#cb89-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">rows =</span> <span class="fu">vars</span>(party))</span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-28-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Another option is overlaying frequency polygons.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="distributions.html#cb90-1" aria-hidden="true" tabindex="-1"></a>congress <span class="sc">%&gt;%</span> </span>
<span id="cb90-2"><a href="distributions.html#cb90-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(age, <span class="at">color =</span> party)) <span class="sc">+</span></span>
<span id="cb90-3"><a href="distributions.html#cb90-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_freqpoly</span>(<span class="at">binwidth =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb90-4"><a href="distributions.html#cb90-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_discrete</span>(<span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)</span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-29-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>The frequency polygons make it even easier to compare the three distributions. Democrats and Republicans are similar, but Democrats are more spread out and are slightly older. The few members in the “Other” category are older than the average Democrat or Republican.</p>
<p>The same pattern works for visualizing the age distributions of the two chambers of Congress.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="distributions.html#cb91-1" aria-hidden="true" tabindex="-1"></a>congress <span class="sc">%&gt;%</span> </span>
<span id="cb91-2"><a href="distributions.html#cb91-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(age, <span class="at">color =</span> chamber)) <span class="sc">+</span></span>
<span id="cb91-3"><a href="distributions.html#cb91-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_freqpoly</span>(<span class="at">binwidth =</span> <span class="dv">5</span>)</span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-30-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Interestingly, they both have a very similar shape. However, because the House has hundreds more members than the Senate, the distributions are far away from each other and it is difficult to directly compare them.</p>
<p>We can solve this issue by mapping the <em>density</em> of each age group to the y-axis. Like <code>geom_histogram()</code> and <code>geom_bar()</code>, <code>geom_freqpoly()</code> computes y-values from the data, and so you don’t need to supply a <code>y</code> aesthetic. By default, the <code>y</code> aesthetic is set to <code>stat(count)</code>. <code>stat(count)</code> computes the number of items in each bin. In order to get <code>geom_freqpoly()</code> to plot densities instead of counts, we’ll set <code>y = stat(density)</code>, which computes the density of items in each bin.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="distributions.html#cb92-1" aria-hidden="true" tabindex="-1"></a>congress <span class="sc">%&gt;%</span> </span>
<span id="cb92-2"><a href="distributions.html#cb92-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(age, <span class="at">y =</span> <span class="fu">stat</span>(density), <span class="at">color =</span> chamber)) <span class="sc">+</span></span>
<span id="cb92-3"><a href="distributions.html#cb92-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_freqpoly</span>(<span class="at">binwidth =</span> <span class="dv">5</span>) </span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-31-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Now, instead of mapping the number of people in each age bin to the y-axis, <code>geom_freqpoly()</code> uses the density of the people in each bin. It’s now clear that, although their shapes are similar, the House is a bit younger and more evenly distributed.</p>
<p>In the previous section, we mentioned a use case for <code>geom_density()</code>. One advantage of <code>geom_density()</code> is that you can fill in the curves, which makes them easier to see.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="distributions.html#cb93-1" aria-hidden="true" tabindex="-1"></a>congress <span class="sc">%&gt;%</span> </span>
<span id="cb93-2"><a href="distributions.html#cb93-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(age, <span class="at">y =</span> <span class="fu">stat</span>(density), <span class="at">color =</span> chamber, <span class="at">fill =</span> chamber )) <span class="sc">+</span></span>
<span id="cb93-3"><a href="distributions.html#cb93-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>() <span class="sc">+</span></span>
<span id="cb93-4"><a href="distributions.html#cb93-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stamp</span>(<span class="st">&quot;Bad&quot;</span>)</span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-32-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>By default, the fill regions are opaque, so to be useful we need to change the transparency with <code>alpha</code>.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="distributions.html#cb94-1" aria-hidden="true" tabindex="-1"></a>congress <span class="sc">%&gt;%</span> </span>
<span id="cb94-2"><a href="distributions.html#cb94-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(age, <span class="at">y =</span> <span class="fu">stat</span>(density), <span class="at">color =</span> chamber, <span class="at">fill =</span> chamber )) <span class="sc">+</span></span>
<span id="cb94-3"><a href="distributions.html#cb94-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>)</span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-33-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>This approach works best when you have sufficient data and the distributions can be distinguished from each other.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="distributions.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">916</span>)</span>
<span id="cb95-2"><a href="distributions.html#cb95-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-3"><a href="distributions.html#cb95-3" aria-hidden="true" tabindex="-1"></a>sim_2 <span class="ot">&lt;-</span> </span>
<span id="cb95-4"><a href="distributions.html#cb95-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(</span>
<span id="cb95-5"><a href="distributions.html#cb95-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tibble</span>(<span class="at">mean =</span> <span class="st">&quot;0&quot;</span>, <span class="at">x =</span> <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="fl">1e4</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)),</span>
<span id="cb95-6"><a href="distributions.html#cb95-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tibble</span>(<span class="at">mean =</span> <span class="st">&quot;1&quot;</span>, <span class="at">x =</span> <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="fl">1e5</span>, <span class="at">mean =</span> <span class="dv">5</span>, <span class="at">sd =</span> <span class="dv">2</span>))</span>
<span id="cb95-7"><a href="distributions.html#cb95-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb95-8"><a href="distributions.html#cb95-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb95-9"><a href="distributions.html#cb95-9" aria-hidden="true" tabindex="-1"></a>sim_2 <span class="sc">%&gt;%</span> </span>
<span id="cb95-10"><a href="distributions.html#cb95-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(x, <span class="at">color =</span> mean, <span class="at">fill =</span> mean)) <span class="sc">+</span></span>
<span id="cb95-11"><a href="distributions.html#cb95-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) </span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-34-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><code>geom_density()</code>, like <code>geom_freqpoly()</code>, doesn’t require that you specify a <code>y</code> aesthetic. By default, the <code>y</code> aesthetic for <code>geom_density()</code> is <code>stat(density)</code>.</p>
<p>In some situations, you’ll want to use <code>stat(count)</code> instead of <code>stat(density)</code>. For example, notice that in <code>sim_2</code>, there are more observations in the “5” group than in the “0” group. <code>stat(density)</code> doesn’t show the number of observations in each group, so you can’t see this difference in the above plot. If we use <code>stat(count)</code>, however, this difference is obvious.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="distributions.html#cb96-1" aria-hidden="true" tabindex="-1"></a>sim_2 <span class="sc">%&gt;%</span> </span>
<span id="cb96-2"><a href="distributions.html#cb96-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(x, <span class="at">y =</span> <span class="fu">stat</span>(count), <span class="at">color =</span> mean, <span class="at">fill =</span> mean)) <span class="sc">+</span></span>
<span id="cb96-3"><a href="distributions.html#cb96-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) </span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-35-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Use <code>stat(count)</code> instead of <code>stat(density)</code> if you want to highlight the number of observations in each group. Otherwise, you can use the default <code>stat(density)</code>.</p>
<p>If we want to visualize more than 2 or 3 distributions at once, we’ll need a new strategy. The variable <code>division</code> contains the U.S. Census division for each Congress member’s state. There are more values in <code>division</code> than in <code>chamber</code> or <code>party</code>, so the <code>geom_freqpoly()</code> plus color combination doesn’t work well.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="distributions.html#cb97-1" aria-hidden="true" tabindex="-1"></a>congress <span class="sc">%&gt;%</span> </span>
<span id="cb97-2"><a href="distributions.html#cb97-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(age, <span class="fu">stat</span>(density), <span class="at">color =</span> division)) <span class="sc">+</span></span>
<span id="cb97-3"><a href="distributions.html#cb97-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_freqpoly</span>(<span class="at">binwidth =</span> <span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb97-4"><a href="distributions.html#cb97-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stamp</span>(<span class="st">&quot;Bad&quot;</span>)</span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-36-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>There are too many colors and the lines overlap too much for this visualization to be very useful.</p>
<p>Instead of encoding <code>division</code> with color, we can encode with position along the x-axis by using boxplots.</p>
<p>Boxplots summarize data.</p>
<p><img src="distributions_files/figure-html/unnamed-chunk-37-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Visual summaries like boxplots are helpful because they highlight important features of the data. Like any summary, however, they don’t provide a full picture of the data. Boxplots can’t fully convey the shape of the distribution in the same way that a histogram or density plot does. Sometimes this trade-off will be worth it, and sometimes it won’t.</p>
<p>Because there are so many different values in <code>division</code>, boxplots are a good strategy. Summarizing the data will allow us to see the differences between the divisions that were hidden in the <code>geom_freqpoly()</code> plot.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="distributions.html#cb98-1" aria-hidden="true" tabindex="-1"></a>congress <span class="sc">%&gt;%</span> </span>
<span id="cb98-2"><a href="distributions.html#cb98-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">division =</span> <span class="fu">fct_reorder</span>(division, age)) <span class="sc">%&gt;%</span> </span>
<span id="cb98-3"><a href="distributions.html#cb98-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(division, age)) <span class="sc">+</span></span>
<span id="cb98-4"><a href="distributions.html#cb98-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb98-5"><a href="distributions.html#cb98-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stamp</span>(<span class="st">&quot;Bad&quot;</span>)</span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-38-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>By now, you should be used to the overlapping labels problem. We could try putting the labels on the y-axis.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="distributions.html#cb99-1" aria-hidden="true" tabindex="-1"></a>congress <span class="sc">%&gt;%</span> </span>
<span id="cb99-2"><a href="distributions.html#cb99-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">division =</span> <span class="fu">fct_reorder</span>(division, age)) <span class="sc">%&gt;%</span> </span>
<span id="cb99-3"><a href="distributions.html#cb99-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(age, division)) <span class="sc">+</span></span>
<span id="cb99-4"><a href="distributions.html#cb99-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb99-5"><a href="distributions.html#cb99-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stamp</span>(<span class="st">&quot;Bad&quot;</span>)</span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-39-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>However, flipping makes the median lines and box boundaries harder to compare, because it is more difficult to compare vertical line segments than horizontal ones.</p>
<p>Instead putting the labels on the y-axis, we can use <code>theme()</code> to angle the labels like you learned earlier.</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="distributions.html#cb100-1" aria-hidden="true" tabindex="-1"></a>congress <span class="sc">%&gt;%</span>  </span>
<span id="cb100-2"><a href="distributions.html#cb100-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">division =</span> <span class="fu">fct_reorder</span>(division, age)) <span class="sc">%&gt;%</span> </span>
<span id="cb100-3"><a href="distributions.html#cb100-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(division, age)) <span class="sc">+</span></span>
<span id="cb100-4"><a href="distributions.html#cb100-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb100-5"><a href="distributions.html#cb100-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="sc">-</span><span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">0</span>))</span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-40-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>The final step is to add a reference line indicating the overall median age.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="distributions.html#cb101-1" aria-hidden="true" tabindex="-1"></a>congress <span class="sc">%&gt;%</span> </span>
<span id="cb101-2"><a href="distributions.html#cb101-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">division =</span> <span class="fu">fct_reorder</span>(division, age)) <span class="sc">%&gt;%</span> </span>
<span id="cb101-3"><a href="distributions.html#cb101-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(division, age)) <span class="sc">+</span></span>
<span id="cb101-4"><a href="distributions.html#cb101-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> <span class="fu">median</span>(age)), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb101-5"><a href="distributions.html#cb101-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb101-6"><a href="distributions.html#cb101-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="sc">-</span><span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">0</span>))</span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-41-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>From this plot, you can see that the median ages don’t vary much across division. The size of the boxes are also similar. If you look at where in each box the median lines fall, however, you’ll notice that some are in the middle, some towards the top, and some towards the bottom. This suggests that the individual distributions are different shapes.</p>
<p>If you care about distribution shape, <code>geom_violin()</code> is an alternative to <code>geom_boxplot()</code>.</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="distributions.html#cb102-1" aria-hidden="true" tabindex="-1"></a>congress <span class="sc">%&gt;%</span> </span>
<span id="cb102-2"><a href="distributions.html#cb102-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">division =</span> <span class="fu">fct_reorder</span>(division, age)) <span class="sc">%&gt;%</span> </span>
<span id="cb102-3"><a href="distributions.html#cb102-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(division, age)) <span class="sc">+</span></span>
<span id="cb102-4"><a href="distributions.html#cb102-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> <span class="fu">median</span>(age)), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb102-5"><a href="distributions.html#cb102-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>() <span class="sc">+</span></span>
<span id="cb102-6"><a href="distributions.html#cb102-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="sc">-</span><span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">0</span>))</span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-42-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Violin plots are mirrored and flipped density plots. The thickness of the “violin” indicates how many values are in that area. With the violin plots, you can now tell that the distribution of ages look slightly different for different divisions. Note that, because violin plots are a form of density plot, they are only a good idea if you have sufficient data.</p>
<p>By default, <code>geom_violin()</code> doesn’t display the median of each group. You can add quantile lines using the <code>draw_quantiles</code> argument. To just draw median lines, set <code>draw_quantiles</code> to 0.5.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="distributions.html#cb103-1" aria-hidden="true" tabindex="-1"></a>congress <span class="sc">%&gt;%</span> </span>
<span id="cb103-2"><a href="distributions.html#cb103-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">division =</span> <span class="fu">fct_reorder</span>(division, age)) <span class="sc">%&gt;%</span> </span>
<span id="cb103-3"><a href="distributions.html#cb103-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(division, age)) <span class="sc">+</span></span>
<span id="cb103-4"><a href="distributions.html#cb103-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> <span class="fu">median</span>(age)), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb103-5"><a href="distributions.html#cb103-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">draw_quantiles =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb103-6"><a href="distributions.html#cb103-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="sc">-</span><span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">0</span>))</span></code></pre></div>
<p><img src="distributions_files/figure-html/unnamed-chunk-43-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>(<code>geom_violin()</code> calculates the quantiles of the density estimate, which is not the same as the quantiles of the data used by <code>quantile()</code>, <code>median()</code>, and <code>geom_boxplot()</code>. This is why the 0.5 quantile lines aren’t perfectly ordered.)</p>
<p>Neither boxplots nor violin plots display the amount of data behind each plot, and so you can’t tell from the plots that New England has fewer representatives than the Pacific division. There are positives and negatives to every visualization decision you’ll make, and so the best geom will depend on what you want your plot to show.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="general-strategy.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="continuous-continuous.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/dcl-docs/data-vis/edit/master/distributions.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
